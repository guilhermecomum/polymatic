{"version":3,"sources":["samples/brazilian-percussion/agogo1.wav","samples/brazilian-percussion/agogo2.wav","samples/brazilian-percussion/caxixi.wav","samples/brazilian-percussion/kick1.wav","samples/brazilian-percussion/snare.wav","samples/brazilian-percussion/surdo1.wav","samples/brazilian-percussion/surdo2.wav","samples/brazilian-percussion/surdo3.wav","samples/brazilian-percussion/surdo4.wav","samples/brazilian-percussion/tamborim1.wav","samples/brazilian-percussion/tamborim2.wav","samples/latin-percussion/block1.wav","samples/latin-percussion/block2.wav","samples/latin-percussion/conga1.wav","samples/latin-percussion/conga2.wav","samples/latin-percussion/conga3.wav","samples/latin-percussion/conga4.wav","samples/latin-percussion/cowbell.wav","samples/latin-percussion/egg1.wav","samples/latin-percussion/egg2.wav","samples/latin-percussion/xequere1.wav","samples/latin-percussion/xequere2.wav","samples/eletronic-drums/clap.wav","samples/eletronic-drums/hat.wav","samples/eletronic-drums/kick1.wav","samples/eletronic-drums/kik2.wav","samples/eletronic-drums/kik3.wav","samples/eletronic-drums/snare.wav","samples/bass.wav","samples/block.wav","samples/bum.wav","samples/claves.wav","samples/cymbal.wav","samples/djembe1.wav","samples/djembe3.wav","samples/djembe2.wav","samples/hit.wav","samples/hithat.wav","samples/kick2.wav","samples/kicklow.wav","samples/tamborim.wav","samples/berimbau1.wav","samples/berimbau2.wav","samples/berimbau3.wav","pages/About.js","store.js","components/Clave.js","lib/clavis.js","components/Preview.js","instruments.js","presets.js","lib/pattern.js","lib/clave.js","components/AlertModal.js","components/Toolbar.js","pages/Home.js","lib/circis.js","lib/circle.js","components/Circle.js","pages/Playground.js","components/Header.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","Header","className","href","process","target","rel","initialState","previewPattern","previewVisibility","piano","samplers","polymetric","claves","circle","shareableLink","isPlaying","instruments","store","createContext","Provider","children","memoizedReducer","React","useCallback","state","action","type","pattern","visible","clave","filteredClaves","filter","id","length","claveIndex","findIndex","newShareLink","map","sequence","join","tempo","sample","instrument","JSON","stringify","circles","Error","useReducer","dispatch","value","Consumer","Clave","canvasRef","useRef","tempoRef","clavis","bpm","activeStep","useState","shift","setShift","volume","setVolume","setTempo","editingTempo","setEditingTempo","useContext","useEffect","configure","current","play","start","focus","shortid","generate","ref","width","height","onChange","e","Number","replace","onBlur","setBpm","onClick","min","max","tooltip","step","index","key","ButtonGroup","aria-label","Button","icon","faPlay","stop","faStop","remove","faTrash","tooltipLabel","currentValue","Clavis","this","canvas","context","animate","lastRender","Date","now","draw","bind","currentStep","patternPos","getContext","window","requestAnimationFrame","theme","radius","angle","Math","PI","startAngle","drawDot","x","y","stroke","fill","strokeStyle","fillStyle","beginPath","arc","drawDotOn","drawDotOff","style","padding","clearRect","lineWidth","patternDots","coords","r","cos","sin","i","push","dots","moveTo","lineTo","closePath","connectDots","drawDotBeat","Preview","agogo1","agogo2","caxixi","kick1","snare","surdo1","surdo2","surdo3","surdo4","tamborim1","tamborim2","block1","block2","conga1","conga2","conga3","conga4","cowbell","egg1","egg2","xequere1","xequere2","eclap","ehat","ekick1","ekik2","ekik3","esnare","bass","block","bumbo","cymbal","djembe1","djembe2","djembe3","hit","hithat","kick2","kicklow","tamborim","berimbau1","berimbau2","berimbau3","presets","name","Pattern","pulses","steps","createSequence","offset","tail","splice","unshift","head","typeOfPulses","er","getPattern","split","prevSequence","size","Tone","channel","pan","player","url","prevSteps","newSteps","ratio","toFixed","transport","indexArray","count","indices","tick","time","chain","destination","schedule","setCurrentStep","seq","callback","events","subdivision","set","setValueAtTime","pause","dispose","AlertModal","show","onHide","onConfirm","Modal","aria-labelledby","centered","closeButton","Title","Body","Footer","variant","Toolbar","history","useHistory","patternError","setPatternError","setInstrument","modalShow","setModalShow","hasClaves","patternInput","removeAll","slower","faBackward","faster","faForward","disabled","faTimes","InputGroup","Prepend","Text","FormControl","placeholder","isEuclidian","RegExp","isBinary","test","number","parseInt","sort","a","b","pulse","newPattern","handlePattern","isInvalid","get","toDestination","Form","Control","as","Object","keys","instrumentsList","Check","inline","label","checked","handleNewClave","Dropdown","Toggle","Menu","preset","Item","forEach","newShareableLink","share","faShareAlt","Home","guias","URLSearchParams","useLocation","search","parse","handlePreset","patternNotes","notes","drawNote","note","Path2D","font","textAlign","fillText","noteOn","Circle","console","log","circleNotes","triggerAttackRelease","setPattern","event","stopPropagation","ctx","circ","isPointInPath","nativeEvent","offsetX","offsetY","updatePattern","Playground","Navbar","collapseOnSelect","bg","expand","Brand","to","packageJson","version","Nav","Link","faEnvelope","faGithub","App","loading","setLoading","ReactGA","initialize","pageview","location","pathname","urls","onload","A1","A2","baseUrl","Spinner","animation","role","basename","exact","path","component","About","Boolean","hostname","match","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","message"],"mappings":"wGAAAA,EAAOC,QAAU,IAA0B,oC,gBCA3CD,EAAOC,QAAU,IAA0B,oC,gBCA3CD,EAAOC,QAAU,IAA0B,oC,gBCA3CD,EAAOC,QAAU,IAA0B,mC,gBCA3CD,EAAOC,QAAU,IAA0B,mC,gBCA3CD,EAAOC,QAAU,IAA0B,oC,gBCA3CD,EAAOC,QAAU,IAA0B,oC,gBCA3CD,EAAOC,QAAU,IAA0B,oC,gBCA3CD,EAAOC,QAAU,IAA0B,oC,gBCA3CD,EAAOC,QAAU,IAA0B,uC,gBCA3CD,EAAOC,QAAU,IAA0B,uC,gBCA3CD,EAAOC,QAAU,IAA0B,oC,gBCA3CD,EAAOC,QAAU,IAA0B,oC,gBCA3CD,EAAOC,QAAU,IAA0B,oC,gBCA3CD,EAAOC,QAAU,IAA0B,oC,gBCA3CD,EAAOC,QAAU,IAA0B,oC,gBCA3CD,EAAOC,QAAU,IAA0B,oC,gBCA3CD,EAAOC,QAAU,IAA0B,qC,gBCA3CD,EAAOC,QAAU,IAA0B,kC,gBCA3CD,EAAOC,QAAU,IAA0B,kC,gBCA3CD,EAAOC,QAAU,IAA0B,sC,gBCA3CD,EAAOC,QAAU,IAA0B,sC,gBCA3CD,EAAOC,QAAU,IAA0B,kC,gBCA3CD,EAAOC,QAAU,IAA0B,iC,gBCA3CD,EAAOC,QAAU,IAA0B,mC,gBCA3CD,EAAOC,QAAU,IAA0B,kC,gBCA3CD,EAAOC,QAAU,IAA0B,kC,gBCA3CD,EAAOC,QAAU,IAA0B,mC,gBCA3CD,EAAOC,QAAU,IAA0B,kC,gBCA3CD,EAAOC,QAAU,IAA0B,mC,gBCA3CD,EAAOC,QAAU,IAA0B,iC,gBCA3CD,EAAOC,QAAU,IAA0B,oC,gBCA3CD,EAAOC,QAAU,IAA0B,oC,gBCA3CD,EAAOC,QAAU,IAA0B,qC,gBCA3CD,EAAOC,QAAU,IAA0B,qC,gBCA3CD,EAAOC,QAAU,IAA0B,qC,gBCA3CD,EAAOC,QAAU,IAA0B,iC,gBCA3CD,EAAOC,QAAU,IAA0B,oC,gBCA3CD,EAAOC,QAAU,IAA0B,mC,gBCA3CD,EAAOC,QAAU,IAA0B,qC,gBCA3CD,EAAOC,QAAU,IAA0B,sC,gBCA3CD,EAAOC,QAAU,IAA0B,uC,gBCA3CD,EAAOC,QAAU,IAA0B,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","file":"static/js/main.a94358a9.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/agogo1.1065034e.wav\";","module.exports = __webpack_public_path__ + \"static/media/agogo2.0e4e658f.wav\";","module.exports = __webpack_public_path__ + \"static/media/caxixi.f6ddaabb.wav\";","module.exports = __webpack_public_path__ + \"static/media/kick1.d96070b8.wav\";","module.exports = __webpack_public_path__ + \"static/media/snare.ac6ee711.wav\";","module.exports = __webpack_public_path__ + \"static/media/surdo1.4c11d5fa.wav\";","module.exports = __webpack_public_path__ + \"static/media/surdo2.de3c5a5c.wav\";","module.exports = __webpack_public_path__ + \"static/media/surdo3.d327f3d9.wav\";","module.exports = __webpack_public_path__ + \"static/media/surdo4.5e1800e9.wav\";","module.exports = __webpack_public_path__ + \"static/media/tamborim1.a6cbfb58.wav\";","module.exports = __webpack_public_path__ + \"static/media/tamborim2.06bd97bb.wav\";","module.exports = __webpack_public_path__ + \"static/media/block1.d9f8c3a9.wav\";","module.exports = __webpack_public_path__ + \"static/media/block2.7e7a9a59.wav\";","module.exports = __webpack_public_path__ + \"static/media/conga1.41b2f57f.wav\";","module.exports = __webpack_public_path__ + \"static/media/conga2.5cc86b71.wav\";","module.exports = __webpack_public_path__ + \"static/media/conga3.435be93f.wav\";","module.exports = __webpack_public_path__ + \"static/media/conga4.a38157fd.wav\";","module.exports = __webpack_public_path__ + \"static/media/cowbell.566cddac.wav\";","module.exports = __webpack_public_path__ + \"static/media/egg1.cedb0f6a.wav\";","module.exports = __webpack_public_path__ + \"static/media/egg2.714c0889.wav\";","module.exports = __webpack_public_path__ + \"static/media/xequere1.c6ac1d9b.wav\";","module.exports = __webpack_public_path__ + \"static/media/xequere2.0e563d7a.wav\";","module.exports = __webpack_public_path__ + \"static/media/clap.7bdee98b.wav\";","module.exports = __webpack_public_path__ + \"static/media/hat.f03a8f48.wav\";","module.exports = __webpack_public_path__ + \"static/media/kick1.9621794a.wav\";","module.exports = __webpack_public_path__ + \"static/media/kik2.c392cef6.wav\";","module.exports = __webpack_public_path__ + \"static/media/kik3.557e0210.wav\";","module.exports = __webpack_public_path__ + \"static/media/snare.4707aa1f.wav\";","module.exports = __webpack_public_path__ + \"static/media/bass.b2419d4f.wav\";","module.exports = __webpack_public_path__ + \"static/media/block.3753c44b.wav\";","module.exports = __webpack_public_path__ + \"static/media/bum.4c11d5fa.wav\";","module.exports = __webpack_public_path__ + \"static/media/claves.400c9ef3.wav\";","module.exports = __webpack_public_path__ + \"static/media/cymbal.950d832b.wav\";","module.exports = __webpack_public_path__ + \"static/media/djembe1.f3e648cb.wav\";","module.exports = __webpack_public_path__ + \"static/media/djembe3.acef368f.wav\";","module.exports = __webpack_public_path__ + \"static/media/djembe2.d38ab3d2.wav\";","module.exports = __webpack_public_path__ + \"static/media/hit.a315148b.wav\";","module.exports = __webpack_public_path__ + \"static/media/hithat.950d832b.wav\";","module.exports = __webpack_public_path__ + \"static/media/kick2.18445a5e.wav\";","module.exports = __webpack_public_path__ + \"static/media/kicklow.c09eab14.wav\";","module.exports = __webpack_public_path__ + \"static/media/tamborim.a6cbfb58.wav\";","module.exports = __webpack_public_path__ + \"static/media/berimbau1.92d78ab8.wav\";","module.exports = __webpack_public_path__ + \"static/media/berimbau2.21b5be71.wav\";","module.exports = __webpack_public_path__ + \"static/media/berimbau3.5677fbc6.wav\";","import React from \"react\";\n\nfunction Header() {\n  return (\n    <div className=\"about\">\n      <div className=\"col-8 offset-2\">\n        <h3>Polymatic!</h3>\n        <p>projeto idealizado por Gil Amancio e Guilherme Guerra</p>\n        <p>\n          O Polymatic é um aplicativo para fazer música ou dar aula de música a\n          partir de outros paradigmas que orientam a criação musical. Ele é\n          inspirado nos modos de produção da música africana e da diáspora. Não\n          é um software para fazer música no computador, mas sim, um aplicativo\n          para fazer música assistida por computador, ou seja, o computador é\n          uma ferramenta para instigar a criação e a execução musical coletiva\n          que acontece junto com o computador.\n        </p>\n        <p>\n          O Polymatic é um aplicativo que gera padrões rítmicos mínimos. Esses\n          padrões têm vários nomes em diferentes lugares, clave em Cuba,\n          timeline nos Estados Unidos e Europa, e no Brasil resolvi chamá-los de\n          Guia.\n        </p>\n        <p>\n          A escolha do nome Guia veio da associação dos registros desses padrões\n          rítmicos de forma circular, feito pelo músico Safi-alDin em Bagdá no\n          ano de 1280, com as Guias usadas pelo povo dos terreiros.\n        </p>\n        <p>\n          Do ponto de vista musical a guia é um ostinato, que se repete sem\n          variação, ao longo de uma peça musical. Ela atua como um dispositivo\n          estruturador da criação musical, dá o tempero da levada e atua também\n          como um cronômetro.\n        </p>\n        <p>\n          Nos terreiros, a palavra guia também tem vários significados, ela pode\n          se referir tanto ao colar utilizado pelas pessoas que frequentam o\n          terreiro, como também as entidades que são chamadas de guias.\n        </p>\n        <p>\n          Acredito que chamar de guia os padrões rítmicos gerados pelo\n          Polymatic, vai nos aproximar do pensamento das culturas dos povos\n          africanos e das diásporas e de suas experiências coletivas de fazer\n          música. Uma música que não se separa da dança e da vida.\n        </p>\n        <p>\n          Esperamos que o Polymatic possa possibilitar que você reúna a família,\n          as/os amigos/as e se for professor as/os estudantes para juntos\n          fazerem música a partir do pensamento musical africano e da diáspora.\n        </p>\n\n        <p>Mas como isso acontece? Leia o nosso manual.</p>\n\n        <p>\n          <a\n            href={`${process.env.PUBLIC_URL}/manual.pdf`}\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          >\n            Baixar manual\n          </a>\n        </p>\n      </div>\n    </div>\n  );\n}\nexport default Header;\n","import React, { createContext, useReducer } from \"react\";\n\nconst initialState = {\n  // type: String\n  // This is the pattern shown by the preview\n  previewPattern: \"\",\n  previewVisibility: false,\n  // type: Map<String,Clave>\n  // This is the list of claves shown by the main screen\n  piano: {},\n  samplers: {},\n  polymetric: false,\n  claves: [],\n  circle: false,\n  shareableLink: \"\",\n  isPlaying: false,\n  instruments: null,\n};\n\nconst store = createContext(initialState);\n\nconst createReducer = () => {\n  return (state, action) => {\n    switch (action.type) {\n      case \"load.app\":\n        return {\n          ...state,\n          samplers: action.samplers,\n          instruments: action.instruments,\n        };\n      case \"load.piano\":\n        return {\n          ...state,\n          piano: action.piano,\n        };\n      case \"previewPattern.update\":\n        return {\n          ...state,\n          previewPattern: action.pattern,\n        };\n      case \"preview.visibility\":\n        return {\n          ...state,\n          previewVisibility: action.visible,\n        };\n      case \"claves.add\":\n        return { ...state, claves: [...state.claves, action.clave] };\n      case \"claves.remove\":\n        const filteredClaves = state.claves.filter(\n          (clave) => clave.id !== action.id\n        );\n        return {\n          ...state,\n          claves: filteredClaves,\n          polymetric: filteredClaves.length > 0 ? state.polymetric : false,\n        };\n      case \"claves.edit\":\n        const claveIndex = state.claves.findIndex(\n          (clave) => clave.id === action.id\n        );\n        state.claves[claveIndex] = action.clave;\n        return {\n          ...state,\n        };\n      case \"claves.removeAll\":\n        return {\n          ...state,\n          claves: [],\n          polymetric: false,\n        };\n      case \"claves.share\":\n        const newShareLink = state.claves.map((clave) => {\n          return {\n            sequence: clave.pattern.sequence.join(\"\"),\n            tempo: clave.tempo,\n            sample: clave.instrument,\n          };\n        });\n        return {\n          ...state,\n          shareableLink: JSON.stringify(newShareLink),\n        };\n      case \"circle.add\":\n        return { ...state, circle: action.circle };\n      case \"circle.edit\":\n        state.circles = action.circle;\n        return {\n          ...state,\n        };\n      case \"toggle.polymetric\":\n        return {\n          ...state,\n          polymetric: !state.polymetric,\n        };\n      case \"start.all\":\n        return { ...state, isPlaying: true };\n      case \"stop.all\":\n        return { ...state, isPlaying: false };\n      default:\n        throw new Error(`Cêsásiessionibuspassnasavassi?`);\n    }\n  };\n};\n\nconst Provider = ({ children }) => {\n  const { Provider } = store;\n  const memoizedReducer = React.useCallback(createReducer(), []);\n  const [state, dispatch] = useReducer(memoizedReducer, initialState);\n  return <Provider value={{ state, dispatch }}>{children}</Provider>;\n};\n\nconst Consumer = store.Consumer;\n\nexport { store, Provider, Consumer };\n","import React, { useEffect, useRef, useState, useContext } from \"react\";\nimport RangeSlider from \"react-bootstrap-range-slider\";\nimport \"react-bootstrap-range-slider/dist/react-bootstrap-range-slider.css\";\nimport shortid from \"shortid\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faPlay, faStop, faTrash } from \"@fortawesome/free-solid-svg-icons\";\nimport { Button, ButtonGroup } from \"react-bootstrap\";\nimport { store } from \"../store\";\n\nexport default function Clave({ clave }) {\n  const canvasRef = useRef();\n  const tempoRef = useRef();\n  const {\n    pattern: { sequence },\n    clavis,\n    instrument,\n    bpm,\n    activeStep,\n  } = clave;\n\n  const [shift, setShift] = useState(0);\n  const [volume, setVolume] = useState(100);\n  const [tempo, setTempo] = useState(bpm);\n  const [editingTempo, setEditingTempo] = useState(false);\n  const { dispatch } = useContext(store);\n  const { state } = useContext(store);\n\n  useEffect(() => {\n    clavis.configure(canvasRef.current, sequence, tempo);\n    clavis.play();\n    if (state.isPlaying) clave.start();\n  }, [state.isPlaying, clave, clavis, sequence, tempo, bpm]);\n\n  useEffect(() => {\n    if (tempoRef.current) {\n      tempoRef.current.focus();\n    }\n  }, [editingTempo]);\n\n  const handleStop = () => {\n    clave.stop();\n  };\n\n  const handleStart = () => {\n    clave.start();\n  };\n\n  const handleRemove = () => {\n    clave.remove();\n    dispatch({ type: \"claves.remove\", id: clave.id });\n  };\n\n  const handleVolume = (value) => {\n    setVolume(value);\n    if (value === 0) {\n      clave.setVolume(-1000);\n    } else {\n      clave.setVolume(value * 0.3 - 24);\n    }\n    dispatch({ type: \"claves.edit\", id: clave.id, clave });\n  };\n\n  const handleRotate = (value) => {\n    setShift(value);\n    clave.shift(value);\n    dispatch({ type: \"claves.edit\", id: clave.id, clave });\n  };\n\n  const handleTempo = (value) => {\n    clave.setBpm(value);\n    dispatch({ type: \"claves.edit\", id: clave.id, clave });\n    setEditingTempo(false);\n  };\n\n  const handleEditTempo = () => {\n    setEditingTempo(true);\n    setTempo(bpm);\n  };\n\n  return (\n    <div className=\"layer\">\n      <div className=\"guia\">\n        <canvas\n          id={shortid.generate()}\n          ref={canvasRef}\n          width={640}\n          height={425}\n        />\n        <div className=\"tempo\">\n          <div>\n            {editingTempo ? (\n              <input\n                ref={tempoRef}\n                pattern=\"[0-9]*\"\n                className=\"tempoInput\"\n                onChange={(e) =>\n                  setTempo(Number(e.target.value.replace(/\\D/, \"\")))\n                }\n                onBlur={(e) =>\n                  handleTempo(Number(e.target.value.replace(/\\D/, \"\")))\n                }\n                type=\"text\"\n                value={tempo}\n              />\n            ) : (\n              <p className=\"tempoInput\" onClick={() => handleEditTempo()}>\n                {bpm}\n              </p>\n            )}\n\n            <p className=\"bpm\">BPM</p>\n          </div>\n        </div>\n      </div>\n      <div className=\"mt-2 volume\">\n        <span className=\"mr-2\">Rotação</span>\n        <RangeSlider\n          value={shift}\n          min={1}\n          max={sequence.join(\"\").length}\n          onChange={(e) => handleRotate(Number(e.target.value))}\n          tooltip=\"off\"\n        />\n      </div>\n      <ul>\n        <li>\n          padrão:\n          <span className=\"sequence\">\n            {sequence.map((step, index) => (\n              <span\n                className={index === activeStep ? \"active\" : \"\"}\n                key={index}\n              >\n                {step}\n              </span>\n            ))}\n          </span>\n        </li>\n\n        <li>instrumento: {instrument}</li>\n      </ul>\n\n      <div className=\"controls\">\n        <ButtonGroup aria-label=\"Basic example\">\n          <Button onClick={() => handleStart()}>\n            <FontAwesomeIcon icon={faPlay} />\n          </Button>\n          <Button onClick={() => handleStop()}>\n            <FontAwesomeIcon icon={faStop} />\n          </Button>\n          <Button onClick={() => handleRemove()}>\n            <FontAwesomeIcon icon={faTrash} />\n          </Button>\n        </ButtonGroup>\n      </div>\n\n      <div className=\"mt-2 volume\">\n        <span className=\"mr-2\">Vol.</span>\n        <RangeSlider\n          value={volume}\n          min={0}\n          max={100}\n          tooltipLabel={(currentValue) => `${currentValue}%`}\n          onChange={(e) => handleVolume(Number(e.target.value))}\n        />\n      </div>\n    </div>\n  );\n}\n","/**\nOriginal code from Lincoln de Sousa\nauthor: Lincoln de Sousa <lincoln@clarete.li>\nsource: https://github.com/clarete/clavis/\n**/\n\nclass Clavis {\n  constructor() {\n    this.canvas = null;\n    this.context = null;\n    this.pattern = null;\n    this.tempo = 0;\n    this.animate = false;\n    this.lastRender = Date.now();\n    this.draw = this.draw.bind(this);\n    this.currentStep = 0;\n    this.patternPos = {};\n  }\n\n  configure(canvas, pattern, tempo) {\n    this.canvas = canvas;\n    this.context = canvas.getContext(\"2d\");\n    this.pattern = pattern;\n    this.tempo = tempo;\n  }\n\n  setCurrentStep(step) {\n    this.currentStep = step;\n  }\n\n  play() {\n    this.animate = true;\n    window.requestAnimationFrame(this.draw);\n  }\n\n  pause() {\n    this.animate = false;\n  }\n\n  draw() {\n    const { canvas, context, pattern } = this;\n    const theme = {\n      \"canvas-padding\": \"20px\",\n      \"canvas-width\": 200,\n      \"canvas-height\": 200,\n      \"outer-circle-radius\": 80,\n      \"outer-circle-line-width\": 2,\n      \"outer-circle-stroke-style\": \"#fff\",\n      \"dot-path-stroke\": \"#cc2c11\",\n      \"dot-on-radius\": 4,\n      \"dot-on-stroke-style\": \"#cc2c11\",\n      \"dot-on-fill-style\": \"#cc2c11\",\n      \"dot-off-radius\": 2,\n      \"dot-off-stroke-style\": \"#fff\",\n      \"dot-off-fill-style\": \"#fff\",\n      \"dot-beat-radius\": 8,\n      \"dot-beat-stroke-style\": \"#cc2c11\",\n      \"dot-beat-fill-style\": \"#cc2c11\"\n    };\n\n    /* Canvas dimensions */\n    const [width, height] = [theme[\"canvas-width\"], theme[\"canvas-height\"]];\n\n    /* Radius of the outer circle */\n    const radius = theme[\"outer-circle-radius\"];\n\n    /* The entire circle is `360∘ ≡ 2π` and we we want to find the\n       distance between each point `2π / N`. */\n    const angle = (2 * Math.PI) / pattern.length;\n\n    /* This is where it all starts */\n    const startAngle = -0.5 * Math.PI;\n\n    /* Configure canvas */\n    canvas.style.padding = theme[\"canvas-padding\"];\n    canvas.width = width;\n    canvas.height = height;\n\n    function drawOuterCircle() {\n      context.lineWidth = theme[\"outer-circle-line-width\"];\n      context.strokeStyle = theme[\"outer-circle-stroke-style\"];\n      context.beginPath();\n      context.arc(\n        width / 2 /* x */,\n        height / 2 /* y */,\n        radius /* radius */,\n        0 /* angle start */,\n        2 * Math.PI /* angle end */\n      );\n      context.stroke();\n    }\n\n    // function drawStep(x, y, step) {\n    //   context.font = \"12px serif\";\n    //   context.fillText(step, x, y);\n    // }\n\n    function drawDot(x, y, { radius, stroke, fill }) {\n      context.strokeStyle = stroke;\n      context.fillStyle = fill;\n      context.beginPath();\n      context.arc(x, y, radius, 0, 2 * Math.PI);\n      context.fill();\n      context.stroke();\n    }\n\n    function drawDotOn(x, y) {\n      drawDot(x, y, {\n        radius: theme[\"dot-on-radius\"],\n        stroke: theme[\"dot-on-stroke-style\"],\n        fill: theme[\"dot-on-fill-style\"]\n      });\n    }\n\n    function drawDotOff(x, y) {\n      drawDot(x, y, {\n        radius: theme[\"dot-off-radius\"],\n        stroke: theme[\"dot-off-stroke-style\"],\n        fill: theme[\"dot-off-fill-style\"]\n      });\n    }\n\n    function drawDotBeat(x, y) {\n      drawDot(x, y, {\n        radius: theme[\"dot-beat-radius\"],\n        stroke: theme[\"dot-beat-stroke-style\"],\n        fill: theme[\"dot-beat-fill-style\"]\n      });\n    }\n\n    context.clearRect(0, 0, width, height);\n    drawOuterCircle();\n\n    const patternDots = [];\n\n    function connectDots(dots) {\n      context.strokeStyle = theme[\"dot-path-stroke\"];\n      context.beginPath();\n      context.moveTo(dots[0][0], dots[0][1]);\n      for (let i = 1; i < dots.length; i++) {\n        context.lineTo(dots[i][0], dots[i][1]);\n      }\n      context.closePath();\n      context.stroke();\n    }\n\n    function coords(angle, r) {\n      /* Find the equidistant points:\n         Many thanks to\n         https://math.stackexchange.com/questions/2820194/how-to-plot-n-coords-to-distribute-evenly-as-a-ring-of-points-around-a-circle\n      */\n      const x = Math.cos(angle) * r + width / 2;\n      const y = Math.sin(angle) * r + height / 2;\n      return [x, y];\n    }\n\n    for (let i = 0; i < pattern.length; i++) {\n      const a = startAngle + angle * i;\n      const [x, y] = coords(a, radius);\n      if (pattern[i] === \"1\") {\n        drawDotOn(x, y);\n        patternDots.push([x, y]);\n      } else {\n        drawDotOff(x, y);\n      }\n      //const [xStep, yStep] = coords(a, 100);\n      //drawStep(xStep, yStep, i + 1);\n      this.patternPos[i] = { x, y };\n    }\n\n    /* Connect the dots */\n    if (patternDots.length >= 1) {\n      connectDots(patternDots);\n    }\n\n    /* Draw the moving dot */\n    const beatX = this.patternPos[this.currentStep].x;\n    const beatY = this.patternPos[this.currentStep].y;\n    drawDotBeat(beatX, beatY);\n    if (this.animate) {\n      window.requestAnimationFrame(this.draw);\n    }\n  }\n}\n\nexport default Clavis;\n","import React, { useEffect, useRef, useContext } from \"react\";\nimport shortid from \"shortid\";\nimport Clavis from \"../lib/clavis\";\nimport { store } from \"../store\";\n\nexport default function Preview() {\n  const clavis = new Clavis();\n  const canvasRef = useRef();\n  const { state } = useContext(store);\n\n  useEffect(() => {\n    if (canvasRef.current) {\n      clavis.configure(canvasRef.current, state.previewPattern, 120);\n      clavis.draw();\n    }\n  }, [state.previewPattern, clavis]);\n\n  if (!state.previewPattern || state.previewPattern.length === 0) {\n    return null;\n  }\n\n  return (\n    <div className=\"layer\">\n      <canvas\n        id={shortid.generate()}\n        ref={canvasRef}\n        width={640}\n        height={425}\n      />\n      <p className=\"Preview\">Pré-visualização</p>\n    </div>\n  );\n}\n","import agogo1 from \"./samples/brazilian-percussion/agogo1.wav\";\nimport agogo2 from \"./samples/brazilian-percussion/agogo2.wav\";\nimport caxixi from \"./samples/brazilian-percussion/caxixi.wav\";\nimport kick1 from \"./samples/brazilian-percussion/kick1.wav\";\nimport snare from \"./samples/brazilian-percussion/snare.wav\";\nimport surdo1 from \"./samples/brazilian-percussion/surdo1.wav\";\nimport surdo2 from \"./samples/brazilian-percussion/surdo2.wav\";\nimport surdo3 from \"./samples/brazilian-percussion/surdo3.wav\";\nimport surdo4 from \"./samples/brazilian-percussion/surdo4.wav\";\nimport tamborim1 from \"./samples/brazilian-percussion/tamborim1.wav\";\nimport tamborim2 from \"./samples/brazilian-percussion/tamborim2.wav\";\n\nimport block1 from \"./samples/latin-percussion/block1.wav\";\nimport block2 from \"./samples/latin-percussion/block2.wav\";\nimport conga1 from \"./samples/latin-percussion/conga1.wav\";\nimport conga2 from \"./samples/latin-percussion/conga2.wav\";\nimport conga3 from \"./samples/latin-percussion/conga3.wav\";\nimport conga4 from \"./samples/latin-percussion/conga4.wav\";\nimport cowbell from \"./samples/latin-percussion/cowbell.wav\";\nimport egg1 from \"./samples/latin-percussion/egg1.wav\";\nimport egg2 from \"./samples/latin-percussion/egg2.wav\";\nimport xequere1 from \"./samples/latin-percussion/xequere1.wav\";\nimport xequere2 from \"./samples/latin-percussion/xequere2.wav\";\n\nimport eclap from \"./samples/eletronic-drums/clap.wav\";\nimport ehat from \"./samples/eletronic-drums/hat.wav\";\nimport ekick1 from \"./samples/eletronic-drums/kick1.wav\";\nimport ekik2 from \"./samples/eletronic-drums/kik2.wav\";\nimport ekik3 from \"./samples/eletronic-drums/kik3.wav\";\nimport esnare from \"./samples/eletronic-drums/snare.wav\";\n\nimport bass from \"./samples/bass.wav\";\nimport block from \"./samples/block.wav\";\nimport bumbo from \"./samples/bum.wav\";\nimport claves from \"./samples/claves.wav\";\nimport cymbal from \"./samples/cymbal.wav\";\nimport djembe1 from \"./samples/djembe1.wav\";\nimport djembe2 from \"./samples/djembe3.wav\";\nimport djembe3 from \"./samples/djembe2.wav\";\nimport hit from \"./samples/hit.wav\";\nimport hithat from \"./samples/hithat.wav\";\nimport kick2 from \"./samples/kick2.wav\";\nimport kicklow from \"./samples/kicklow.wav\";\nimport tamborim from \"./samples/tamborim.wav\";\nimport berimbau1 from \"./samples/berimbau1.wav\";\nimport berimbau2 from \"./samples/berimbau2.wav\";\nimport berimbau3 from \"./samples/berimbau3.wav\";\n\nconst instruments = {\n  agogo1,\n  agogo2,\n  caxixi,\n  kick1,\n  snare,\n  surdo1,\n  surdo2,\n  surdo3,\n  surdo4,\n  tamborim1,\n  tamborim2,\n  block1,\n  block2,\n  conga1,\n  conga2,\n  conga3,\n  conga4,\n  cowbell,\n  egg1,\n  egg2,\n  xequere1,\n  xequere2,\n  eclap,\n  ehat,\n  ekick1,\n  ekik2,\n  ekik3,\n  esnare,\n  bass,\n  block,\n  bumbo,\n  claves,\n  cymbal,\n  djembe1,\n  djembe2,\n  djembe3,\n  hit,\n  hithat,\n  kick2,\n  kicklow,\n  tamborim,\n  berimbau1,\n  berimbau2,\n  berimbau3,\n};\n\nexport default instruments;\n","import shortid from \"shortid\";\n\nconst presets = {\n  [shortid.generate()]: {\n    name: \"Toque Ignbin\",\n    instruments: [{ sequence: \"101101011010\", tempo: 120, sample: \"conga1\" }]\n  },\n  [shortid.generate()]: {\n    name: \"Son cubano\",\n    instruments: [\n      {\n        sequence: \"1001001000101000\",\n        tempo: 92,\n        sample: \"claves\"\n      }\n    ]\n  },\n  [shortid.generate()]: {\n    name: \"Rumba\",\n    instruments: [\n      { sequence: \"1001000100101000\", tempo: 110, sample: \"claves\" }\n    ]\n  },\n  [shortid.generate()]: {\n    name: \"Samba\",\n    instruments: [\n      { sequence: \"1011010101101010\", tempo: 60, sample: \"tamborim\" }\n    ]\n  }\n};\n\nexport default presets;\n","/**\n Original code\n Author: Ehsan Ziya <ehsan.ziya@gmail.com>\n source: https:github.com/zya/beet.js\n**/\n\nimport er from \"euclidean-rhythms\";\n\nclass Pattern {\n  constructor(pulses, steps) {\n    this.pulses = pulses;\n    this.steps = steps;\n    this.sequence = \"\";\n    this.createSequence(pulses, steps);\n    this.offset = 0;\n  }\n\n  update(pulses, steps) {\n    this.createSequence(pulses, steps);\n  }\n\n  shift(offset) {\n    const isIncreasing = this.offset < offset ? true : false;\n\n    if (isIncreasing) {\n      const tail = this.sequence.splice(this.sequence.length - 1, 1);\n\n      for (let i = 0; i < tail.length; i++) {\n        this.sequence.unshift(tail[i]);\n      }\n\n      this.pulses = this.sequence.join(\"\");\n      this.steps = this.sequence.length;\n    } else {\n      const head = this.sequence.splice(0, 1);\n\n      for (let i = 0; i < head.length; i++) {\n        this.sequence.push(head[i]);\n      }\n\n      this.pulses = this.sequence.join(\"\");\n      this.steps = this.sequence.length;\n    }\n\n    this.offset = offset;\n    return this;\n  }\n\n  createSequence(pulses, steps) {\n    var typeOfPulses = typeof pulses;\n\n    if (typeOfPulses === \"number\") {\n      this.steps = steps;\n      this.sequence = er.getPattern(pulses, steps);\n      this.pulses = this.sequence.join(\"\");\n    } else if (typeOfPulses === \"string\") {\n      this.steps = pulses.length;\n      this.sequence = pulses.split(\"\");\n    }\n  }\n}\n\nexport default Pattern;\n","import Clavis from \"./clavis\";\nimport Pattern from \"./pattern\";\nimport shortid from \"shortid\";\nimport * as Tone from \"tone\";\n\nclass Clave {\n  constructor(\n    sequence,\n    bpm,\n    instrument,\n    sample,\n    polymetric = false,\n    prevSequence\n  ) {\n    this.id = shortid.generate();\n    this.prevSequence = prevSequence;\n    this.pattern = new Pattern(sequence);\n    this.bpm = bpm;\n    this.volume = 0;\n    this.polymetric = polymetric;\n    this.clavis = new Clavis();\n    this.size = this.pattern.sequence.length;\n    this.instrument = instrument;\n    this.sample = sample;\n    this.activeStep = null;\n    this.context = new Tone.Context();\n    this.channel = new Tone.Channel({\n      volume: this.volume,\n      pan: 0,\n      context: this.context,\n    });\n\n    this.player = new Tone.Player({\n      url: this.sample,\n      context: this.context,\n    });\n\n    if (this.polymetric) {\n      let prevSteps = this.prevSequence.length;\n\n      let newSteps = this.size;\n      if (newSteps !== prevSteps) {\n        if (prevSteps > newSteps) {\n          let ratio = prevSteps / newSteps;\n          this.bpm = (this.bpm * ratio).toFixed(2);\n        } else {\n          let ratio = newSteps / prevSteps;\n          this.bpm = (this.bpm / ratio).toFixed(2);\n        }\n      }\n    }\n\n    this.context.transport.bpm.value = this.bpm;\n\n    this.indexArray = (count) => {\n      const indices = [];\n      for (let i = 0; i < count; i++) {\n        indices.push(i);\n      }\n      return indices;\n    };\n\n    this.tick = (time, value) => {\n      if (this.pattern.sequence[value] === \"1\") {\n        this.player.start(time).chain(this.channel, this.context.destination);\n      }\n      this.context.draw.schedule(() => {\n        this.clavis.setCurrentStep(value);\n      }, time);\n    };\n\n    this.seq = new Tone.Sequence({\n      context: this.context,\n      callback: this.tick,\n      events: this.indexArray(this.size),\n      subdivision: `${this.size}n`,\n    }).start(0);\n  }\n\n  setVolume(volume) {\n    this.volume = volume;\n    this.channel.set({ volume });\n  }\n\n  pattern(pulses, steps) {\n    return new Pattern(pulses, steps);\n  }\n\n  shift(value) {\n    this.pattern = this.pattern.shift(value);\n    this.clavis.draw();\n  }\n\n  setActivestep(ref) {\n    this.activeStep = ref;\n  }\n\n  setBpm(bpm) {\n    this.bpm = bpm;\n    const now = this.context.transport.now();\n    this.context.transport.bpm.setValueAtTime(this.bpm, now);\n  }\n\n  remove() {\n    this.clavis.pause();\n    this.seq.dispose();\n    this.context.dispose();\n    this.channel.dispose();\n  }\n\n  start() {\n    Tone.start();\n    this.context.transport.start();\n    this.seq.start();\n    this.clavis.play();\n  }\n\n  stop() {\n    this.context.transport.stop();\n    this.clavis.pause();\n    this.seq.stop();\n  }\n\n  faster() {\n    this.setBpm(this.bpm + 1);\n  }\n\n  slower() {\n    if (this.bpm >= 2) {\n      this.setBpm(this.bpm - 1);\n    } else {\n      this.setBpm(1);\n    }\n  }\n}\n\nexport default Clave;\n","import React from \"react\";\nimport { Button, Modal } from \"react-bootstrap\";\n\nexport default function AlertModal({ show, onHide, onConfirm }) {\n  return (\n    <Modal\n      show={show}\n      onHide={onHide}\n      size=\"lg\"\n      aria-labelledby=\"contained-modal-title-vcenter\"\n      centered\n    >\n      <Modal.Header closeButton>\n        <Modal.Title id=\"contained-modal-title-vcenter\">\n          Remover todas as guias?\n        </Modal.Title>\n      </Modal.Header>\n      <Modal.Body>\n        <h4>Atenção!</h4>\n        <p>Você confirma que deseja apagar todas as guias?</p>\n      </Modal.Body>\n      <Modal.Footer>\n        <Button variant=\"secondary\" onClick={onHide}>\n          Fechar\n        </Button>\n        <Button onClick={onConfirm}>Remover</Button>\n      </Modal.Footer>\n    </Modal>\n  );\n}\n","import React, { useState, useContext, useRef } from \"react\";\nimport shortid from \"shortid\";\nimport er from \"euclidean-rhythms\";\nimport instrumentsList from \"../instruments\";\nimport presets from \"../presets\";\nimport Clave from \"../lib/clave\";\nimport AlertModal from \"./AlertModal\";\nimport { useHistory } from \"react-router-dom\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport * as Tone from \"tone\";\nimport {\n  faPlay,\n  faStop,\n  faTimes,\n  faShareAlt,\n  faBackward,\n  faForward,\n} from \"@fortawesome/free-solid-svg-icons\";\nimport {\n  Button,\n  ButtonGroup,\n  FormControl,\n  InputGroup,\n  Form,\n  Dropdown,\n} from \"react-bootstrap\";\n\nimport { store } from \"../store\";\n\nfunction Toolbar() {\n  const history = useHistory();\n  const [patternError, setPatternError] = useState(false);\n  const [instrument, setInstrument] = useState(\"agogo1\");\n  const [tempo, setTempo] = useState(120);\n\n  const { dispatch } = useContext(store);\n  const {\n    state: {\n      claves,\n      previewPattern,\n      polymetric,\n      previewVisibility,\n      shareableLink,\n      samplers,\n    },\n  } = useContext(store);\n  const [modalShow, setModalShow] = useState(false);\n  const hasClaves = claves.length > 0 ? true : false;\n  const patternInput = useRef(null);\n  let prevSequence = \"\";\n\n  if (claves.length > 0) {\n    prevSequence = claves[0].pattern.sequence.join(\"\");\n  }\n\n  const handleNewClave = () => {\n    const clave = new Clave(\n      previewPattern,\n      tempo,\n      instrument,\n      samplers.get(instrument),\n      polymetric,\n      prevSequence\n    );\n    dispatch({ type: \"claves.add\", id: shortid.generate(), clave });\n    dispatch({ type: \"previewPattern.update\", pattern: previewPattern });\n    dispatch({ type: \"preview.visibility\", visible: false });\n    dispatch({ type: \"start.all\" });\n  };\n\n  const handlePreset = (value) => {\n    presets[value].instruments.forEach((preset) => {\n      const { sequence, tempo, sample } = preset;\n      const clave = new Clave(sequence, tempo, sample, samplers.get(sample));\n      dispatch({ type: \"claves.add\", id: shortid.generate(), clave });\n    });\n    dispatch({ type: \"start.all\" });\n  };\n\n  const handlePattern = (value) => {\n    const isEuclidian = new RegExp(\"^(\\\\d+),(\\\\d+)$\");\n    const isBinary = new RegExp(\"^[0-1]{1,}$\");\n    if (isEuclidian.test(value)) {\n      const [pulse, steps] = value\n        .split(\",\")\n        .map((number) => parseInt(number))\n        .sort((a, b) => a - b);\n      const newPattern = er.getPattern(pulse, steps).join(\"\");\n      dispatch({ type: \"previewPattern.update\", pattern: newPattern });\n      setPatternError(false);\n    } else if (isBinary.test(value)) {\n      dispatch({ type: \"previewPattern.update\", pattern: value });\n      setPatternError(false);\n    } else {\n      setPatternError(true);\n    }\n    if (value === \"\") {\n      dispatch({ type: \"previewPattern.update\", pattern: value });\n      setPatternError(false);\n    }\n\n    if (!previewVisibility) {\n      dispatch({ type: \"preview.visibility\", visible: true });\n    }\n  };\n\n  const previewSample = () => {\n    const player = new Tone.Player({\n      url: samplers.get(instrument),\n    }).toDestination();\n    player.start(0);\n  };\n\n  const slower = () => {\n    for (const clave of claves) {\n      clave.slower();\n      dispatch({ type: \"claves.edit\", id: clave.id, clave });\n    }\n  };\n\n  const faster = () => {\n    for (const clave of claves) {\n      clave.faster();\n      dispatch({ type: \"claves.edit\", id: clave.id, clave });\n    }\n  };\n\n  const start = () => {\n    for (const clave of claves) {\n      clave.start();\n    }\n  };\n\n  const stop = () => {\n    for (const clave of claves) {\n      clave.stop();\n    }\n    dispatch({ type: \"stop.all\", isPlaying: true });\n  };\n\n  const remove = () => {\n    for (const clave of claves) {\n      clave.remove();\n    }\n    dispatch({ type: \"stop.all\", isPlaying: true });\n  };\n\n  const removeAll = () => {\n    remove();\n    dispatch({ type: \"claves.removeAll\" });\n    setModalShow(false);\n  };\n\n  const share = () => {\n    const newShareLink = claves.map((clave) => {\n      return {\n        sequence: clave.pattern.sequence.join(\"\"),\n        tempo: clave.bpm,\n        sample: clave.instrument,\n      };\n    });\n\n    const newShareableLink = JSON.stringify(newShareLink);\n\n    if (newShareableLink !== shareableLink) {\n      stop();\n      dispatch({ type: \"claves.share\", shareableLink: newShareableLink });\n      dispatch({ type: \"claves.removeAll\" });\n      history.push(`/guias?guias=${newShareableLink}`);\n    }\n  };\n\n  return (\n    <div className=\"toolbar\">\n      <AlertModal\n        show={modalShow}\n        onHide={() => setModalShow(false)}\n        onConfirm={() => removeAll()}\n      />\n      <div className=\"toolbar-controls\">\n        <ButtonGroup aria-label=\"Basic example\">\n          <Button onClick={() => slower()}>\n            <FontAwesomeIcon icon={faBackward} />\n          </Button>\n          <Button onClick={() => start()}>\n            <FontAwesomeIcon icon={faPlay} />\n          </Button>\n          <Button onClick={() => stop()}>\n            <FontAwesomeIcon icon={faStop} />\n          </Button>\n          <Button onClick={() => faster()}>\n            <FontAwesomeIcon icon={faForward} />\n          </Button>\n          <Button onClick={() => setModalShow(true)} disabled={!hasClaves}>\n            <FontAwesomeIcon icon={faTimes} />\n          </Button>\n        </ButtonGroup>\n      </div>\n      <div className=\"toolbar-form\">\n        <InputGroup>\n          <InputGroup.Prepend>\n            <InputGroup.Text id=\"basic-addon3\">Padrão</InputGroup.Text>\n          </InputGroup.Prepend>\n          <FormControl\n            placeholder=\"1010101 ou 3,4\"\n            ref={patternInput}\n            onChange={(e) => handlePattern(e.target.value)}\n            isInvalid={patternError}\n          />\n        </InputGroup>\n        <InputGroup>\n          <InputGroup.Prepend>\n            <InputGroup.Text id=\"basic-addon3\">Tempo</InputGroup.Text>\n          </InputGroup.Prepend>\n          <FormControl\n            placeholder=\"tempo\"\n            value={tempo}\n            onChange={(e) => setTempo(Number(e.target.value))}\n          />\n        </InputGroup>\n        <InputGroup>\n          <InputGroup.Prepend>\n            <Button onClick={() => previewSample()}>\n              <FontAwesomeIcon icon={faPlay} />\n            </Button>\n          </InputGroup.Prepend>\n          <Form.Control\n            as=\"select\"\n            onChange={(e) => setInstrument(e.target.value)}\n          >\n            {Object.keys(instrumentsList).map((instrument, index) => (\n              <option key={index} value={instrument}>\n                {instrument}\n              </option>\n            ))}\n          </Form.Control>\n        </InputGroup>\n        <Form.Check\n          inline\n          className=\"ml-2 polymetric\"\n          type=\"checkbox\"\n          label=\"Polimetria\"\n          checked={polymetric}\n          onChange={() => dispatch({ type: \"toggle.polymetric\" })}\n          disabled={!hasClaves}\n        />\n\n        <Button\n          className=\"ml-2\"\n          onClick={() => handleNewClave()}\n          disabled={patternError || previewPattern.length === 0}\n        >\n          Adicionar\n        </Button>\n\n        <Dropdown className=\"ml-2\">\n          <Dropdown.Toggle variant=\"info\" id=\"dropdown-basic\">\n            presets\n          </Dropdown.Toggle>\n          <Dropdown.Menu>\n            {Object.keys(presets).map((preset, index) => (\n              <Dropdown.Item key={index} onClick={() => handlePreset(preset)}>\n                {presets[preset].name}\n              </Dropdown.Item>\n            ))}\n          </Dropdown.Menu>\n        </Dropdown>\n\n        <Button onClick={() => share()} disabled={!hasClaves}>\n          <FontAwesomeIcon icon={faShareAlt} />\n        </Button>\n      </div>\n    </div>\n  );\n}\nexport default Toolbar;\n","import React, { useEffect, useContext } from \"react\";\nimport Layer from \"../components/Clave\";\nimport Preview from \"../components/Preview\";\nimport Toolbar from \"../components/Toolbar\";\nimport shortid from \"shortid\";\nimport { store } from \"../store\";\nimport { useLocation } from \"react-router-dom\";\nimport Clave from \"../lib/clave\";\n\nfunction Home() {\n  const { state, dispatch } = useContext(store);\n  const useQuery = () => new URLSearchParams(useLocation().search);\n  const query = useQuery();\n  const guias = query.get(\"guias\");\n  const claves = JSON.parse(guias);\n\n  useEffect(() => {\n    async function handlePreset(claves) {\n      await claves.forEach((preset) => {\n        const { sequence, tempo, sample } = preset;\n        const clave = new Clave(\n          sequence,\n          tempo,\n          sample,\n          state.samplers.get(sample)\n        );\n        return dispatch({\n          type: \"claves.add\",\n          id: shortid.generate(),\n          clave,\n        });\n      });\n    }\n\n    if (claves) {\n      handlePreset(claves);\n    }\n  }, [guias]);\n\n  return (\n    <div className=\"App\">\n      <Toolbar />\n      <div className=\"wrapper\">\n        {state.claves.map((clave) => (\n          <Layer key={clave.id} clave={clave} />\n        ))}\n        {state.previewVisibility && <Preview />}\n      </div>\n    </div>\n  );\n}\n\nexport default Home;\n","/**\nOriginal code from Lincoln de Sousa\nauthor: Lincoln de Sousa <lincoln@clarete.li>\nsource: https://github.com/clarete/clavis/\n**/\n\nclass Clavis {\n  constructor() {\n    this.canvas = null;\n    this.context = null;\n    this.pattern = null;\n    this.tempo = 0;\n    this.animate = false;\n    this.lastRender = Date.now();\n    this.draw = this.draw.bind(this);\n    this.currentStep = 0;\n    this.patternPos = {};\n    this.patternNotes = [];\n    this.notes = [\n      \"C\",\n      \"C#\",\n      \"D\",\n      \"D#\",\n      \"E\",\n      \"F\",\n      \"F#\",\n      \"G\",\n      \"G#\",\n      \"A\",\n      \"A#\",\n      \"B\",\n    ];\n  }\n\n  configure(canvas, pattern, tempo) {\n    this.pattern = pattern;\n    this.canvas = canvas;\n    this.context = canvas.getContext(\"2d\");\n    this.tempo = tempo;\n  }\n\n  setCurrentStep(step) {\n    this.currentStep = step;\n  }\n\n  play() {\n    this.animate = true;\n    window.requestAnimationFrame(this.draw);\n  }\n\n  pause() {\n    this.animate = false;\n  }\n\n  draw() {\n    const { canvas, context, pattern } = this;\n    const theme = {\n      \"canvas-padding\": \"0px\",\n      \"canvas-width\": 600,\n      \"canvas-height\": 600,\n      \"notes-circle-radius\": 220,\n      \"outer-circle-radius\": 180,\n      \"outer-circle-line-width\": 0,\n      \"outer-circle-stroke-style\": \"#000\",\n      \"dot-path-stroke\": \"#cc2c11\",\n      \"dot-on-radius\": 4,\n      \"dot-on-stroke-style\": \"#cc2c11\",\n      \"dot-on-fill-style\": \"#cc2c11\",\n      \"dot-off-radius\": 2,\n      \"dot-off-stroke-style\": \"#fff\",\n      \"dot-off-fill-style\": \"#fff\",\n      \"dot-beat-radius\": 8,\n      \"dot-beat-stroke-style\": \"#cc2c11\",\n      \"dot-beat-fill-style\": \"#cc2c11\",\n    };\n\n    /* Canvas dimensions */\n    const [width, height] = [theme[\"canvas-width\"], theme[\"canvas-height\"]];\n\n    /* Radius of the outer circle */\n    const radius = theme[\"outer-circle-radius\"];\n\n    /* The entire circle is `360∘ ≡ 2π` and we we want to find the\n       distance between each point `2π / N`. */\n\n    const angle = (2 * Math.PI) / pattern.length;\n\n    /* This is where it all starts */\n    const startAngle = -0.5 * Math.PI;\n\n    /* Configure canvas */\n    canvas.style.padding = theme[\"canvas-padding\"];\n    canvas.width = width;\n    canvas.height = height;\n\n    function drawOuterCircle() {\n      context.lineWidth = theme[\"outer-circle-line-width\"];\n      context.strokeStyle = theme[\"outer-circle-stroke-style\"];\n      context.beginPath();\n      context.arc(\n        width / 2 /* x */,\n        height / 2 /* y */,\n        radius /* radius */,\n        0 /* angle start */,\n        2 * Math.PI /* angle end */\n      );\n      context.stroke();\n    }\n\n    // function drawStep(x, y, step) {\n    //   context.font = \"12px serif\";\n    //   context.fillText(step, x, y);\n    // }\n\n    function drawNote(x, y, note) {\n      const circle = new Path2D();\n      circle.arc(x, y, 20, 0, 2 * Math.PI);\n      context.fillStyle = \"#fff\";\n      context.fill(circle);\n      context.font = \"8pt sans\";\n      context.fillStyle = \"black\";\n      context.textAlign = \"center\";\n      context.font = \"15px serif\";\n      context.fillText(note, x, y + 5);\n      return circle;\n    }\n\n    function drawDot(x, y, { radius, stroke, fill }) {\n      context.strokeStyle = stroke;\n      context.fillStyle = fill;\n      context.beginPath();\n      context.arc(x, y, radius, 0, 2 * Math.PI);\n      context.fill();\n      context.stroke();\n    }\n\n    function drawDotOn(x, y) {\n      drawDot(x, y, {\n        radius: theme[\"dot-on-radius\"],\n        stroke: theme[\"dot-on-stroke-style\"],\n        fill: theme[\"dot-on-fill-style\"],\n      });\n    }\n\n    function drawDotOff(x, y) {\n      drawDot(x, y, {\n        radius: theme[\"dot-off-radius\"],\n        stroke: theme[\"dot-off-stroke-style\"],\n        fill: theme[\"dot-off-fill-style\"],\n      });\n    }\n\n    function drawDotBeat(x, y) {\n      drawDot(x, y, {\n        radius: theme[\"dot-beat-radius\"],\n        stroke: theme[\"dot-beat-stroke-style\"],\n        fill: theme[\"dot-beat-fill-style\"],\n      });\n    }\n\n    context.clearRect(0, 0, width, height);\n    drawOuterCircle();\n\n    const patternDots = [];\n    const patternNotes = [];\n\n    function connectDots(dots) {\n      context.strokeStyle = theme[\"dot-path-stroke\"];\n      context.beginPath();\n      context.moveTo(dots[0][0], dots[0][1]);\n      for (let i = 1; i < dots.length; i++) {\n        context.lineTo(dots[i][0], dots[i][1]);\n      }\n      context.closePath();\n      context.stroke();\n    }\n\n    function coords(angle, r) {\n      /* Find the equidistant points:\n         Many thanks to\n         https://math.stackexchange.com/questions/2820194/how-to-plot-n-coords-to-distribute-evenly-as-a-ring-of-points-around-a-circle\n      */\n      const x = Math.cos(angle) * r + width / 2;\n      const y = Math.sin(angle) * r + height / 2;\n      return [x, y];\n    }\n\n    for (let i = 0; i < pattern.length; i++) {\n      const a = startAngle + angle * i;\n      const [x, y] = coords(a, radius);\n      if (pattern[i] === \"1\") {\n        drawDotOn(x, y);\n        patternDots.push([x, y]);\n      } else {\n        drawDotOff(x, y);\n      }\n      const nRadius = theme[\"notes-\"];\n      const [xNote, yNote] = coords(a, theme[\"notes-circle-radius\"]);\n      const noteOn = drawNote(xNote, yNote, this.notes[i]);\n      patternNotes.push(noteOn);\n      this.patternPos[i] = { x, y };\n      this.patternNotes[i] = noteOn;\n    }\n\n    /* Connect the dots */\n    if (patternDots.length >= 1) {\n      connectDots(patternDots);\n    }\n\n    /* Draw the moving dot */\n    const beatX = this.patternPos[this.currentStep].x;\n    const beatY = this.patternPos[this.currentStep].y;\n    drawDotBeat(beatX, beatY);\n    if (this.animate) {\n      window.requestAnimationFrame(this.draw);\n    }\n  }\n}\n\nexport default Clavis;\n","import Clavis from \"./circis\";\nimport Pattern from \"./pattern\";\nimport shortid from \"shortid\";\nimport * as Tone from \"tone\";\n\nclass Circle {\n  constructor(piano) {\n    console.log(\"new Circle\");\n    this.id = shortid.generate();\n    this.pattern = new Pattern(\"100010010000\");\n    this.clavis = new Clavis();\n    this.size = this.pattern.sequence.length;\n    this.piano = piano;\n    this.bpm = 120;\n    this.circleNotes = [\n      \"C1\",\n      \"C#1\",\n      \"D1\",\n      \"D#1\",\n      \"E1\",\n      \"F1\",\n      \"F#1\",\n      \"G1\",\n      \"G#1\",\n      \"A1\",\n      \"A#1\",\n      \"B1\",\n    ];\n\n    Tone.Transport.bpm.value = this.bpm;\n\n    this.indexArray = (count) => {\n      const indices = [];\n      for (let i = 0; i < count; i++) {\n        indices.push(i);\n      }\n      return indices;\n    };\n\n    this.tick = (time, value) => {\n      if (this.pattern.sequence[value] === \"1\") {\n        this.piano.triggerAttackRelease(this.circleNotes[value], 0.25);\n      }\n      Tone.Draw.schedule(() => {\n        this.clavis.setCurrentStep(value);\n        this.clavis.draw();\n      }, time);\n    };\n\n    this.seq = new Tone.Sequence({\n      callback: this.tick,\n      events: this.indexArray(this.size),\n      subdivision: `${this.size}n`,\n    }).start(0);\n  }\n\n  shift(value) {\n    this.pattern = this.pattern.shift(value);\n  }\n\n  setBpm(bpm) {\n    this.bpm = bpm;\n    const now = Tone.Transport.now();\n    Tone.Transport.bpm.setValueAtTime(this.bpm, now);\n  }\n\n  updatePattern(pattern) {\n    this.pattern = new Pattern(pattern);\n    this.size = this.pattern.sequence.length;\n    this.clavis.draw();\n  }\n\n  start() {\n    console.log(\"start\");\n    Tone.start();\n    Tone.Transport.start();\n    this.seq.start();\n  }\n\n  stop() {\n    Tone.Transport.stop();\n    this.seq.stop();\n  }\n}\n\nexport default Circle;\n","import React, { useEffect, useRef, useState, useContext } from \"react\";\nimport RangeSlider from \"react-bootstrap-range-slider\";\nimport \"react-bootstrap-range-slider/dist/react-bootstrap-range-slider.css\";\nimport shortid from \"shortid\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faPlay, faStop } from \"@fortawesome/free-solid-svg-icons\";\nimport { Button, ButtonGroup } from \"react-bootstrap\";\nimport { store } from \"../store\";\n\nexport default function Circle({ circle }) {\n  const canvasRef = useRef();\n  const tempoRef = useRef();\n  const {\n    pattern: { sequence },\n    clavis,\n    bpm,\n  } = circle;\n\n  const [pattern, setPattern] = useState(sequence);\n  const [shift, setShift] = useState(0);\n  const [tempo, setTempo] = useState(bpm);\n  const [editingTempo, setEditingTempo] = useState(false);\n  const { dispatch } = useContext(store);\n  const { state } = useContext(store);\n\n  useEffect(() => {\n    clavis.configure(canvasRef.current, sequence, tempo);\n    clavis.draw();\n    if (state.isPlaying) circle.start();\n  }, [state.isPlaying, circle, clavis, sequence, tempo, bpm, pattern]);\n\n  useEffect(() => {\n    if (tempoRef.current) {\n      tempoRef.current.focus();\n    }\n  }, [editingTempo]);\n\n  const handleStop = () => {\n    circle.stop();\n  };\n\n  const handleStart = () => {\n    circle.start();\n  };\n\n  const handleRotate = (value) => {\n    setShift(value);\n    circle.shift(value);\n    dispatch({ type: \"circle.edit\", id: circle.id, circle });\n  };\n\n  const handleTempo = (value) => {\n    console.log(\"value\", value);\n    circle.setBpm(value);\n    dispatch({ type: \"circle.edit\", circle });\n    setEditingTempo(false);\n  };\n\n  const handleEditTempo = () => {\n    setEditingTempo(true);\n    setTempo(bpm);\n  };\n\n  const handleClick = (event) => {\n    event.stopPropagation();\n    const ctx = clavis.context;\n\n    clavis.patternNotes.forEach((circ, index) => {\n      if (\n        ctx.isPointInPath(\n          circ,\n          event.nativeEvent.offsetX,\n          event.nativeEvent.offsetY\n        )\n      ) {\n        ctx.fillStyle = \"green\";\n        //clavis.addDot(index);\n        ctx.lineWidth = 4;\n        ctx.strokeStyle = \"red\";\n        ctx.stroke(circ);\n        pattern[index] = pattern[index] === \"1\" ? \"0\" : \"1\";\n        setPattern(pattern);\n        circle.updatePattern(pattern.join(\"\"));\n        dispatch({ type: \"circle.edit\", circle });\n      } else {\n        ctx.strokeStyle = \"white\";\n        ctx.stroke(circ);\n      }\n    });\n  };\n\n  return (\n    <div className=\"layer\">\n      <div className=\"guia\">\n        <canvas\n          id={shortid.generate()}\n          ref={canvasRef}\n          width={700}\n          height={700}\n          onClick={handleClick}\n        />\n        <div className=\"tempo\">\n          <div>\n            {editingTempo ? (\n              <input\n                ref={tempoRef}\n                pattern=\"[0-9]*\"\n                className=\"tempoInput\"\n                onChange={(e) =>\n                  setTempo(Number(e.target.value.replace(/\\D/, \"\")))\n                }\n                onBlur={(e) =>\n                  handleTempo(Number(e.target.value.replace(/\\D/, \"\")))\n                }\n                type=\"text\"\n                value={tempo}\n              />\n            ) : (\n              <p className=\"tempoInput\" onClick={() => handleEditTempo()}>\n                {bpm}\n              </p>\n            )}\n\n            <p className=\"bpm\">BPM</p>\n          </div>\n        </div>\n      </div>\n      <div className=\"mt-2 volume\">\n        <span className=\"mr-2\">Rotação</span>\n        <RangeSlider\n          value={shift}\n          min={1}\n          max={sequence.join(\"\").length}\n          onChange={(e) => handleRotate(Number(e.target.value))}\n          tooltip=\"off\"\n        />\n      </div>\n\n      <div className=\"controls\">\n        <ButtonGroup aria-label=\"Basic example\">\n          <Button onClick={() => handleStart()}>\n            <FontAwesomeIcon icon={faPlay} />\n          </Button>\n          <Button onClick={() => handleStop()}>\n            <FontAwesomeIcon icon={faStop} />\n          </Button>\n        </ButtonGroup>\n      </div>\n    </div>\n  );\n}\n","import React, { useEffect, useContext, useRef } from \"react\";\nimport { store } from \"../store\";\nimport Circle from \"../lib/circle\";\nimport Layer from \"../components/Circle\";\n\nfunction Playground() {\n  const { state, dispatch } = useContext(store);\n\n  useEffect(() => {\n    const circle = new Circle(state.piano);\n    dispatch({ type: \"circle.add\", circle });\n  }, []);\n\n  return (\n    <div className=\"App\">\n      <div className=\"circle-wrapper\">\n        {state.circle && <Layer circle={state.circle} />}\n      </div>\n    </div>\n  );\n}\n\nexport default Playground;\n","import React from \"react\";\nimport packageJson from \"../../package.json\";\nimport { Link } from \"react-router-dom\";\nimport { Navbar, Nav } from \"react-bootstrap\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faGithub } from \"@fortawesome/free-brands-svg-icons\";\nimport { faEnvelope } from \"@fortawesome/free-solid-svg-icons\";\nfunction Header() {\n  return (\n    <Navbar collapseOnSelect bg=\"black\" expand=\"lg\" variant=\"black\">\n      <Navbar.Brand>\n        <h3>\n          <Link to=\"/\">\n            Polymatic <small>{packageJson.version}</small>\n          </Link>\n        </h3>\n      </Navbar.Brand>\n      <Nav className=\"mr-auto\">\n        <Nav>\n          <Link to=\"/sobre\">sobre</Link>\n        </Nav>\n      </Nav>\n\n      <Nav className=\"justify-content-end\">\n        <Nav.Link href=\"mailto:polymatic@ciberterreiro.org\">\n          <FontAwesomeIcon icon={faEnvelope} className=\"github\" size=\"2x\" />\n        </Nav.Link>\n        <Nav.Link\n          href=\"https://github.com/guilhermecomum/polymatic\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          <FontAwesomeIcon icon={faGithub} className=\"github\" size=\"2x\" />\n        </Nav.Link>\n      </Nav>\n    </Navbar>\n  );\n}\nexport default Header;\n","import React, { useEffect, useContext, useState } from \"react\";\nimport { HashRouter, Route, Switch } from \"react-router-dom\";\nimport ReactGA from \"react-ga\";\nimport About from \"./pages/About\";\nimport Home from \"./pages/Home\";\nimport Playground from \"./pages/Playground\";\nimport Header from \"./components/Header\";\nimport instruments from \"./instruments\";\nimport \"./custom.scss\";\nimport \"./App.sass\";\nimport { store } from \"./store\";\nimport { Spinner } from \"react-bootstrap\";\nimport * as Tone from \"tone\";\n\nfunction App() {\n  const [loading, setLoading] = useState(true);\n  const trackingId = \"UA-160360260-2\";\n  ReactGA.initialize(trackingId);\n  ReactGA.pageview(window.location.pathname + window.location.search);\n  const { dispatch } = useContext(store);\n\n  useEffect(() => {\n    const samplers = new Tone.ToneAudioBuffers({\n      urls: {\n        ...instruments,\n      },\n      onload: () => setLoading(false),\n    });\n    dispatch({\n      type: \"load.app\",\n      samplers: samplers,\n    });\n    const piano = new Tone.Sampler({\n      urls: {\n        A1: \"A1.mp3\",\n        A2: \"A2.mp3\",\n      },\n      baseUrl: \"https://tonejs.github.io/audio/casio/\",\n      onload: () => setLoading(false),\n    }).toDestination();\n    dispatch({\n      type: \"load.piano\",\n      piano: piano,\n    });\n  }, [dispatch]);\n\n  if (loading) {\n    return (\n      <Spinner animation=\"border\" role=\"status\">\n        <span className=\"sr-only\">Loading...</span>\n      </Spinner>\n    );\n  }\n\n  return (\n    <HashRouter basename=\"/\">\n      <Header />\n      <Switch>\n        <Route exact path=\"/\" component={Home} />\n        <Route exact path=\"/sobre\" component={About} />\n        <Route exact path=\"/guias\" component={Home} />\n        <Route exact path=\"/circle\" component={Playground} />\n      </Switch>\n    </HashRouter>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nimport { Provider } from './store';\n\nReactDOM.render(\n    <Provider><App /></Provider>,\n    document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}