(this.webpackJsonpPolymatic=this.webpackJsonpPolymatic||[]).push([[0],Array(72).concat([function(e,t,a){e.exports=a.p+"static/media/agogo1.1065034e.wav"},function(e,t,a){e.exports=a.p+"static/media/agogo2.0e4e658f.wav"},function(e,t,a){e.exports=a.p+"static/media/caxixi.f6ddaabb.wav"},function(e,t,a){e.exports=a.p+"static/media/kick1.d96070b8.wav"},function(e,t,a){e.exports=a.p+"static/media/snare.ac6ee711.wav"},function(e,t,a){e.exports=a.p+"static/media/surdo1.4c11d5fa.wav"},function(e,t,a){e.exports=a.p+"static/media/surdo2.de3c5a5c.wav"},function(e,t,a){e.exports=a.p+"static/media/surdo3.d327f3d9.wav"},function(e,t,a){e.exports=a.p+"static/media/surdo4.5e1800e9.wav"},function(e,t,a){e.exports=a.p+"static/media/tamborim1.a6cbfb58.wav"},function(e,t,a){e.exports=a.p+"static/media/tamborim2.06bd97bb.wav"},function(e,t,a){e.exports=a.p+"static/media/block1.d9f8c3a9.wav"},function(e,t,a){e.exports=a.p+"static/media/block2.7e7a9a59.wav"},function(e,t,a){e.exports=a.p+"static/media/conga1.41b2f57f.wav"},function(e,t,a){e.exports=a.p+"static/media/conga2.5cc86b71.wav"},function(e,t,a){e.exports=a.p+"static/media/conga3.435be93f.wav"},function(e,t,a){e.exports=a.p+"static/media/conga4.a38157fd.wav"},function(e,t,a){e.exports=a.p+"static/media/cowbell.566cddac.wav"},function(e,t,a){e.exports=a.p+"static/media/egg1.cedb0f6a.wav"},function(e,t,a){e.exports=a.p+"static/media/egg2.714c0889.wav"},function(e,t,a){e.exports=a.p+"static/media/xequere1.c6ac1d9b.wav"},function(e,t,a){e.exports=a.p+"static/media/xequere2.0e563d7a.wav"},function(e,t,a){e.exports=a.p+"static/media/clap.7bdee98b.wav"},function(e,t,a){e.exports=a.p+"static/media/hat.f03a8f48.wav"},function(e,t,a){e.exports=a.p+"static/media/kick1.9621794a.wav"},function(e,t,a){e.exports=a.p+"static/media/kik2.c392cef6.wav"},function(e,t,a){e.exports=a.p+"static/media/kik3.557e0210.wav"},function(e,t,a){e.exports=a.p+"static/media/snare.4707aa1f.wav"},function(e,t,a){e.exports=a.p+"static/media/bass.b2419d4f.wav"},function(e,t,a){e.exports=a.p+"static/media/block.3753c44b.wav"},function(e,t,a){e.exports=a.p+"static/media/bum.4c11d5fa.wav"},function(e,t,a){e.exports=a.p+"static/media/claves.400c9ef3.wav"},function(e,t,a){e.exports=a.p+"static/media/cymbal.950d832b.wav"},function(e,t,a){e.exports=a.p+"static/media/djembe1.f3e648cb.wav"},function(e,t,a){e.exports=a.p+"static/media/djembe3.acef368f.wav"},function(e,t,a){e.exports=a.p+"static/media/djembe2.d38ab3d2.wav"},function(e,t,a){e.exports=a.p+"static/media/hit.a315148b.wav"},function(e,t,a){e.exports=a.p+"static/media/hithat.950d832b.wav"},function(e,t,a){e.exports=a.p+"static/media/kick2.18445a5e.wav"},function(e,t,a){e.exports=a.p+"static/media/kicklow.c09eab14.wav"},function(e,t,a){e.exports=a.p+"static/media/tamborim.a6cbfb58.wav"},,,,,function(e){e.exports=JSON.parse('{"name":"Polymatic","version":"6.0.0","private":true,"homepage":"https://polymatic.ciberterreiro.org","dependencies":{"@fortawesome/fontawesome-svg-core":"^1.2.27","@fortawesome/free-brands-svg-icons":"^5.15.1","@fortawesome/free-solid-svg-icons":"^5.12.1","@fortawesome/react-fontawesome":"^0.1.9","@testing-library/jest-dom":"^4.2.4","@testing-library/react":"^9.3.2","@testing-library/user-event":"^7.1.2","bootstrap":"^4.4.1","euclidean-rhythms":"^2.0.1","gh-pages":"^2.2.0","react":"^16.13.0","react-bootstrap":"^1.0.0-beta.17","react-bootstrap-range-slider":"^0.3.1","react-dom":"^16.13.0","react-ga":"^2.7.0","react-router-dom":"^5.1.2","react-scripts":"3.4.0","sass":"^1.32.5","shortid":"^2.2.15","tone":"^14.7.58"},"scripts":{"start":"react-scripts start","build":"react-scripts build","test":"react-scripts test","eject":"react-scripts eject","predeploy":"npm run build","deploy":"gh-pages -b gh-pages -d build","staging":"npm run build && cp CI build/CNAME && gh-pages -b staging -o staging -d build"},"eslintConfig":{"extends":"react-app"},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]},"devDependencies":{"semantic-release":"^17.2.3"}}')},,,,,function(e,t,a){e.exports=a(157)},,,,,function(e,t,a){},,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),s=a(31),r=a.n(s),c=(a(127),a(3)),o=a(11),l=a(40),u=a(15),m=a(68);var p=function(){return i.a.createElement("div",{className:"about"},i.a.createElement("div",{className:"col-8 offset-2"},i.a.createElement("h3",null,"Polymatic!"),i.a.createElement("p",null,"projeto idealizado por Gil Amancio e Guilherme Guerra"),i.a.createElement("p",null,"O Polymatic \xe9 um aplicativo para fazer m\xfasica ou dar aula de m\xfasica a partir de outros paradigmas que orientam a cria\xe7\xe3o musical. Ele \xe9 inspirado nos modos de produ\xe7\xe3o da m\xfasica africana e da di\xe1spora. N\xe3o \xe9 um software para fazer m\xfasica no computador, mas sim, um aplicativo para fazer m\xfasica assistida por computador, ou seja, o computador \xe9 uma ferramenta para instigar a cria\xe7\xe3o e a execu\xe7\xe3o musical coletiva que acontece junto com o computador."),i.a.createElement("p",null,"O Polymatic \xe9 um aplicativo que gera padr\xf5es r\xedtmicos m\xednimos. Esses padr\xf5es t\xeam v\xe1rios nomes em diferentes lugares, clave em Cuba, timeline nos Estados Unidos e Europa, e no Brasil resolvi cham\xe1-los de Guia."),i.a.createElement("p",null,"A escolha do nome Guia veio da associa\xe7\xe3o dos registros desses padr\xf5es r\xedtmicos de forma circular, feito pelo m\xfasico Safi-alDin em Bagd\xe1 no ano de 1280, com as Guias usadas pelo povo dos terreiros."),i.a.createElement("p",null,"Do ponto de vista musical a guia \xe9 um ostinato, que se repete sem varia\xe7\xe3o, ao longo de uma pe\xe7a musical. Ela atua como um dispositivo estruturador da cria\xe7\xe3o musical, d\xe1 o tempero da levada e atua tamb\xe9m como um cron\xf4metro."),i.a.createElement("p",null,"Nos terreiros, a palavra guia tamb\xe9m tem v\xe1rios significados, ela pode se referir tanto ao colar utilizado pelas pessoas que frequentam o terreiro, como tamb\xe9m as entidades que s\xe3o chamadas de guias."),i.a.createElement("p",null,"Acredito que chamar de guia os padr\xf5es r\xedtmicos gerados pelo Polymatic, vai nos aproximar do pensamento das culturas dos povos africanos e das di\xe1sporas e de suas experi\xeancias coletivas de fazer m\xfasica. Uma m\xfasica que n\xe3o se separa da dan\xe7a e da vida."),i.a.createElement("p",null,"Esperamos que o Polymatic possa possibilitar que voc\xea re\xfana a fam\xedlia, as/os amigos/as e se for professor as/os estudantes para juntos fazerem m\xfasica a partir do pensamento musical africano e da di\xe1spora."),i.a.createElement("p",null,"Mas como isso acontece? Leia o nosso manual."),i.a.createElement("p",null,i.a.createElement("a",{href:"".concat("","/manual.pdf"),target:"_blank",rel:"noopener noreferrer"},"Baixar manual"))))},d=a(4),v=a.n(d),f=a(10),h=a(64),b=a.n(h),g=(a(131),a(19)),E=a.n(g),y=a(22),w=a(23),x=a(162),j=a(71),k=a(12),O={previewPattern:"",previewVisibility:!1,samplers:{},polymetric:!1,claves:[],shareableLink:"",isPlaying:!1,instruments:null},q=Object(n.createContext)(O),P=function(e){var t=e.children,a=q.Provider,s=i.a.useCallback((function(e,t){switch(t.type){case"load.app":return Object(c.a)(Object(c.a)({},e),{},{samplers:t.samplers,instruments:t.instruments});case"previewPattern.update":return Object(c.a)(Object(c.a)({},e),{},{previewPattern:t.pattern});case"preview.visibility":return Object(c.a)(Object(c.a)({},e),{},{previewVisibility:t.visible});case"claves.add":return Object(c.a)(Object(c.a)({},e),{},{claves:[].concat(Object(k.a)(e.claves),[t.clave])});case"claves.remove":var a=e.claves.filter((function(e){return e.id!==t.id}));return Object(c.a)(Object(c.a)({},e),{},{claves:a,polymetric:a.length>0&&e.polymetric});case"claves.edit":var n=e.claves.findIndex((function(e){return e.id===t.id}));return e.claves[n]=t.clave,Object(c.a)({},e);case"claves.removeAll":return Object(c.a)(Object(c.a)({},e),{},{claves:[],polymetric:!1});case"claves.share":var i=e.claves.map((function(e){return{sequence:e.pattern.sequence.join(""),tempo:e.tempo,sample:e.instrument}}));return Object(c.a)(Object(c.a)({},e),{},{shareableLink:JSON.stringify(i)});case"toggle.polymetric":return Object(c.a)(Object(c.a)({},e),{},{polymetric:!e.polymetric});case"start.all":return Object(c.a)(Object(c.a)({},e),{},{isPlaying:!0});case"stop.all":return Object(c.a)(Object(c.a)({},e),{},{isPlaying:!1});default:throw new Error("C\xeas\xe1siessionibuspassnasavassi?")}}),[]),r=Object(n.useReducer)(s,O),l=Object(o.a)(r,2),u=l[0],m=l[1];return i.a.createElement(a,{value:{state:u,dispatch:m}},t)};q.Consumer;function C(e){var t=e.clave,a=Object(n.useRef)(),s=Object(n.useRef)(),r=t.pattern.sequence,c=t.clavis,l=t.instrument,u=t.bpm,m=t.activeStep,p=Object(n.useState)(0),d=Object(o.a)(p,2),v=d[0],f=d[1],h=Object(n.useState)(100),g=Object(o.a)(h,2),k=g[0],O=g[1],P=Object(n.useState)(u),C=Object(o.a)(P,2),N=C[0],S=C[1],A=Object(n.useState)(!1),B=Object(o.a)(A,2),z=B[0],R=B[1],I=Object(n.useContext)(q).dispatch,L=Object(n.useContext)(q).state;Object(n.useEffect)((function(){c.configure(a.current,r,N),c.play(),L.isPlaying&&t.start()}),[L.isPlaying,t,c,r,N,u]),Object(n.useEffect)((function(){s.current&&s.current.focus()}),[z]);return i.a.createElement("div",{className:"layer"},i.a.createElement("div",{className:"guia"},i.a.createElement("canvas",{id:E.a.generate(),ref:a,width:640,height:425}),i.a.createElement("div",{className:"tempo"},i.a.createElement("div",null,z?i.a.createElement("input",{ref:s,pattern:"[0-9]*",className:"tempoInput",onChange:function(e){return S(Number(e.target.value.replace(/\D/,"")))},onBlur:function(e){return a=Number(e.target.value.replace(/\D/,"")),t.setBpm(a),I({type:"claves.edit",id:t.id,clave:t}),void R(!1);var a},type:"text",value:N}):i.a.createElement("p",{className:"tempoInput",onClick:function(){return R(!0),void S(u)}},u),i.a.createElement("p",{className:"bpm"},"BPM")))),i.a.createElement("div",{className:"mt-2 volume"},i.a.createElement("span",{className:"mr-2"},"Rota\xe7\xe3o"),i.a.createElement(b.a,{value:v,min:1,max:r.join("").length,onChange:function(e){return a=Number(e.target.value),f(a),t.shift(a),void I({type:"claves.edit",id:t.id,clave:t});var a},tooltip:"off"})),i.a.createElement("ul",null,i.a.createElement("li",null,"padr\xe3o:",i.a.createElement("span",{className:"sequence"},r.map((function(e,t){return i.a.createElement("span",{className:t===m?"active":"",key:t},e)})))),i.a.createElement("li",null,"instrumento: ",l)),i.a.createElement("div",{className:"controls"},i.a.createElement(x.a,{"aria-label":"Basic example"},i.a.createElement(j.a,{onClick:function(){t.start()}},i.a.createElement(y.a,{icon:w.d})),i.a.createElement(j.a,{onClick:function(){t.stop()}},i.a.createElement(y.a,{icon:w.f})),i.a.createElement(j.a,{onClick:function(){return t.remove(),void I({type:"claves.remove",id:t.id})}},i.a.createElement(y.a,{icon:w.h})))),i.a.createElement("div",{className:"mt-2 volume"},i.a.createElement("span",{className:"mr-2"},"Vol."),i.a.createElement(b.a,{value:k,min:0,max:100,tooltipLabel:function(e){return"".concat(e,"%")},onChange:function(e){return a=Number(e.target.value),O(a),0===a?t.setVolume(-1e3):t.setVolume(.3*a-24),void I({type:"claves.edit",id:t.id,clave:t});var a}})))}var N=a(1),S=a(2),A=function(){function e(){Object(N.a)(this,e),this.canvas=null,this.context=null,this.pattern=null,this.tempo=0,this.animate=!1,this.lastRender=Date.now(),this.draw=this.draw.bind(this),this.currentStep=0,this.patternPos={}}return Object(S.a)(e,[{key:"configure",value:function(e,t,a){this.canvas=e,this.context=e.getContext("2d"),this.pattern=t,this.tempo=a}},{key:"setCurrentStep",value:function(e){this.currentStep=e}},{key:"play",value:function(){this.animate=!0,window.requestAnimationFrame(this.draw)}},{key:"pause",value:function(){this.animate=!1}},{key:"draw",value:function(){var e=this.canvas,t=this.context,a=this.pattern,n="20px",i=2,s="#fff",r="#cc2c11",c=4,l="#cc2c11",u="#cc2c11",m=2,p="#fff",d="#fff",v=8,f="#cc2c11",h="#cc2c11",b=[200,200],g=b[0],E=b[1],y=80,w=2*Math.PI/a.length,x=-.5*Math.PI;function j(e,a,n){var i=n.radius,s=n.stroke,r=n.fill;t.strokeStyle=s,t.fillStyle=r,t.beginPath(),t.arc(e,a,i,0,2*Math.PI),t.fill(),t.stroke()}function k(e,t){j(e,t,{radius:c,stroke:l,fill:u})}function O(e,t){j(e,t,{radius:m,stroke:p,fill:d})}e.style.padding=n,e.width=g,e.height=E,t.clearRect(0,0,g,E),t.lineWidth=i,t.strokeStyle=s,t.beginPath(),t.arc(g/2,E/2,y,0,2*Math.PI),t.stroke();var q=[];function P(e,t){return[Math.cos(e)*t+g/2,Math.sin(e)*t+E/2]}for(var C=0;C<a.length;C++){var N=P(x+w*C,y),S=Object(o.a)(N,2),A=S[0],B=S[1];"1"===a[C]?(k(A,B),q.push([A,B])):O(A,B),this.patternPos[C]={x:A,y:B}}q.length>=1&&function(e){t.strokeStyle=r,t.beginPath(),t.moveTo(e[0][0],e[0][1]);for(var a=1;a<e.length;a++)t.lineTo(e[a][0],e[a][1]);t.closePath(),t.stroke()}(q),function(e,t){j(e,t,{radius:v,stroke:f,fill:h})}(this.patternPos[this.currentStep].x,this.patternPos[this.currentStep].y),this.animate&&window.requestAnimationFrame(this.draw)}}]),e}();function B(){var e=new A,t=Object(n.useRef)(),a=Object(n.useContext)(q).state;return Object(n.useEffect)((function(){t.current&&(e.configure(t.current,a.previewPattern,120),e.draw())}),[a.previewPattern,e]),a.previewPattern&&0!==a.previewPattern.length?i.a.createElement("div",{className:"layer"},i.a.createElement("canvas",{id:E.a.generate(),ref:t,width:640,height:425}),i.a.createElement("p",{className:"Preview"},"Pr\xe9-visualiza\xe7\xe3o")):null}var z,R=a(13),I=a(56),L=a.n(I),M=a(72),V=a.n(M),T=a(73),D=a.n(T),F=a(74),G=a.n(F),J=a(75),H=a.n(J),U=a(76),W=a.n(U),$=a(77),_=a.n($),K=a(78),Q=a.n(K),X=a(79),Y=a.n(X),Z=a(80),ee=a.n(Z),te=a(81),ae=a.n(te),ne=a(82),ie=a.n(ne),se=a(83),re=a.n(se),ce=a(84),oe=a.n(ce),le=a(85),ue=a.n(le),me=a(86),pe=a.n(me),de=a(87),ve=a.n(de),fe=a(88),he=a.n(fe),be=a(89),ge=a.n(be),Ee=a(90),ye=a.n(Ee),we=a(91),xe=a.n(we),je=a(92),ke=a.n(je),Oe=a(93),qe=a.n(Oe),Pe=a(94),Ce=a.n(Pe),Ne=a(95),Se=a.n(Ne),Ae=a(96),Be=a.n(Ae),ze=a(97),Re=a.n(ze),Ie=a(98),Le=a.n(Ie),Me=a(99),Ve=a.n(Me),Te=a(100),De=a.n(Te),Fe=a(101),Ge=a.n(Fe),Je=a(102),He=a.n(Je),Ue=a(103),We=a.n(Ue),$e=a(104),_e=a.n($e),Ke=a(105),Qe=a.n(Ke),Xe=a(106),Ye=a.n(Xe),Ze=a(107),et=a.n(Ze),tt=a(108),at=a.n(tt),nt=a(109),it=a.n(nt),st=a(110),rt=a.n(st),ct=a(111),ot=a.n(ct),lt=a(112),ut=a.n(lt),mt={agogo1:V.a,agogo2:D.a,caxixi:G.a,kick1:H.a,snare:W.a,surdo1:_.a,surdo2:Q.a,surdo3:Y.a,surdo4:ee.a,tamborim1:ae.a,tamborim2:ie.a,block1:re.a,block2:oe.a,conga1:ue.a,conga2:pe.a,conga3:ve.a,conga4:he.a,cowbell:ge.a,egg1:ye.a,egg2:xe.a,xequere1:ke.a,xequere2:qe.a,eclap:Ce.a,ehat:Se.a,ekick1:Be.a,ekik2:Re.a,ekik3:Le.a,esnare:Ve.a,bass:De.a,block:Ge.a,bumbo:He.a,claves:We.a,cymbal:_e.a,djembe1:Qe.a,djembe2:Ye.a,djembe3:et.a,hit:at.a,hithat:it.a,kick2:rt.a,kicklow:ot.a,tamborim:ut.a},pt=a(21),dt=(z={},Object(pt.a)(z,E.a.generate(),{name:"Toque Ignbin",instruments:[{sequence:"101101011010",tempo:120,sample:"conga1"}]}),Object(pt.a)(z,E.a.generate(),{name:"Son cubano",instruments:[{sequence:"1001001000101000",tempo:92,sample:"claves"}]}),Object(pt.a)(z,E.a.generate(),{name:"Rumba",instruments:[{sequence:"1001000100101000",tempo:110,sample:"claves"}]}),Object(pt.a)(z,E.a.generate(),{name:"Samba",instruments:[{sequence:"1011010101101010",tempo:60,sample:"tamborim"}]}),z),vt=function(){function e(t,a){Object(N.a)(this,e),this.pulses=t,this.steps=a,this.sequence="",this.createSequence(t,a),this.offset=0}return Object(S.a)(e,[{key:"update",value:function(e,t){this.createSequence(e,t)}},{key:"shift",value:function(e){if(this.offset<e){for(var t=this.sequence.splice(this.sequence.length-1,1),a=0;a<t.length;a++)this.sequence.unshift(t[a]);this.pulses=this.sequence.join(""),this.steps=this.sequence.length}else{for(var n=this.sequence.splice(0,1),i=0;i<n.length;i++)this.sequence.push(n[i]);this.pulses=this.sequence.join(""),this.steps=this.sequence.length}return this.offset=e,this}},{key:"createSequence",value:function(e,t){var a=typeof e;"number"===a?(this.steps=t,this.sequence=L.a.getPattern(e,t),this.pulses=this.sequence.join("")):"string"===a&&(this.steps=e.length,this.sequence=e.split(""))}}]),e}(),ft=a(32),ht=function(){function e(t,a,n,i){var s=this,r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],c=arguments.length>5?arguments[5]:void 0;if(Object(N.a)(this,e),this.id=E.a.generate(),this.prevSequence=c,this.pattern=new vt(t),this.bpm=a,this.volume=0,this.polymetric=r,this.clavis=new A,this.size=this.pattern.sequence.length,this.instrument=n,this.sample=i,this.activeStep=null,this.context=new ft.b,this.channel=new ft.a({volume:this.volume,pan:0,context:this.context}),this.player=new ft.c({url:this.sample,context:this.context}),this.polymetric){var o=this.prevSequence.length,l=this.size;if(l!==o)if(o>l){var u=o/l;this.bpm=(this.bpm*u).toFixed(2)}else{var m=l/o;this.bpm=(this.bpm/m).toFixed(2)}}this.context.transport.bpm.value=this.bpm,this.indexArray=function(e){for(var t=[],a=0;a<e;a++)t.push(a);return t},this.tick=function(e,t){"1"===s.pattern.sequence[t]&&s.player.start(e).chain(s.channel,s.context.destination),s.context.draw.schedule((function(){s.clavis.setCurrentStep(t)}),e)},this.seq=new ft.d({context:this.context,callback:this.tick,events:this.indexArray(this.size),subdivision:"".concat(this.size,"n")}).start(0)}return Object(S.a)(e,[{key:"setVolume",value:function(e){this.volume=e,this.channel.set({volume:e})}},{key:"pattern",value:function(e,t){return new vt(e,t)}},{key:"shift",value:function(e){this.pattern=this.pattern.shift(e),this.clavis.draw()}},{key:"setActivestep",value:function(e){this.activeStep=e}},{key:"setBpm",value:function(e){this.bpm=e;var t=this.context.transport.now();this.context.transport.bpm.setValueAtTime(this.bpm,t)}},{key:"remove",value:function(){this.clavis.pause(),this.seq.dispose(),this.context.dispose(),this.channel.dispose()}},{key:"start",value:function(){ft.f(),this.context.transport.start(),this.seq.start(),this.clavis.play()}},{key:"stop",value:function(){this.context.transport.stop(),this.clavis.pause(),this.seq.stop()}},{key:"faster",value:function(){this.setBpm(this.bpm+1)}},{key:"slower",value:function(){this.bpm>=2?this.setBpm(this.bpm-1):this.setBpm(1)}}]),e}(),bt=a(165);function gt(e){var t=e.show,a=e.onHide,n=e.onConfirm;return i.a.createElement(bt.a,{show:t,onHide:a,size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0},i.a.createElement(bt.a.Header,{closeButton:!0},i.a.createElement(bt.a.Title,{id:"contained-modal-title-vcenter"},"Remover todas as guias?")),i.a.createElement(bt.a.Body,null,i.a.createElement("h4",null,"Aten\xe7\xe3o!"),i.a.createElement("p",null,"Voc\xea confirma que deseja apagar todas as guias?")),i.a.createElement(bt.a.Footer,null,i.a.createElement(j.a,{variant:"secondary",onClick:a},"Fechar"),i.a.createElement(j.a,{onClick:n},"Remover")))}var Et=a(163),yt=a(115),wt=a(166),xt=a(167);var jt=function(){var e=Object(u.f)(),t=Object(n.useState)(!1),a=Object(o.a)(t,2),s=a[0],r=a[1],c=Object(n.useState)("agogo1"),l=Object(o.a)(c,2),m=l[0],p=l[1],d=Object(n.useState)(120),v=Object(o.a)(d,2),f=v[0],h=v[1],b=Object(n.useContext)(q).dispatch,g=Object(n.useContext)(q).state,k=g.claves,O=g.previewPattern,P=g.polymetric,C=g.previewVisibility,N=g.shareableLink,S=g.samplers,A=Object(n.useState)(!1),B=Object(o.a)(A,2),z=B[0],I=B[1],M=k.length>0,V=Object(n.useRef)(null),T="";k.length>0&&(T=k[0].pattern.sequence.join(""));var D=function(){var e,t=Object(R.a)(k);try{for(t.s();!(e=t.n()).done;){e.value.stop()}}catch(a){t.e(a)}finally{t.f()}b({type:"stop.all",isPlaying:!0})},F=function(){!function(){var e,t=Object(R.a)(k);try{for(t.s();!(e=t.n()).done;){e.value.remove()}}catch(a){t.e(a)}finally{t.f()}b({type:"stop.all",isPlaying:!0})}(),b({type:"claves.removeAll"}),I(!1)};return i.a.createElement("div",{className:"toolbar"},i.a.createElement(gt,{show:z,onHide:function(){return I(!1)},onConfirm:function(){return F()}}),i.a.createElement("div",{className:"toolbar-controls"},i.a.createElement(x.a,{"aria-label":"Basic example"},i.a.createElement(j.a,{onClick:function(){return function(){var e,t=Object(R.a)(k);try{for(t.s();!(e=t.n()).done;){var a=e.value;a.slower(),b({type:"claves.edit",id:a.id,clave:a})}}catch(n){t.e(n)}finally{t.f()}}()}},i.a.createElement(y.a,{icon:w.a})),i.a.createElement(j.a,{onClick:function(){return function(){var e,t=Object(R.a)(k);try{for(t.s();!(e=t.n()).done;){e.value.start()}}catch(a){t.e(a)}finally{t.f()}}()}},i.a.createElement(y.a,{icon:w.d})),i.a.createElement(j.a,{onClick:function(){return D()}},i.a.createElement(y.a,{icon:w.f})),i.a.createElement(j.a,{onClick:function(){return function(){var e,t=Object(R.a)(k);try{for(t.s();!(e=t.n()).done;){var a=e.value;a.faster(),b({type:"claves.edit",id:a.id,clave:a})}}catch(n){t.e(n)}finally{t.f()}}()}},i.a.createElement(y.a,{icon:w.c})),i.a.createElement(j.a,{onClick:function(){return I(!0)},disabled:!M},i.a.createElement(y.a,{icon:w.g})))),i.a.createElement("div",{className:"toolbar-form"},i.a.createElement(Et.a,null,i.a.createElement(Et.a.Prepend,null,i.a.createElement(Et.a.Text,{id:"basic-addon3"},"Padr\xe3o")),i.a.createElement(yt.a,{placeholder:"1010101 ou 3,4",ref:V,onChange:function(e){return function(e){var t=new RegExp("^(\\d+),(\\d+)$"),a=new RegExp("^[0-1]{1,}$");if(t.test(e)){var n=e.split(",").map((function(e){return parseInt(e)})).sort((function(e,t){return e-t})),i=Object(o.a)(n,2),s=i[0],c=i[1],l=L.a.getPattern(s,c).join("");b({type:"previewPattern.update",pattern:l}),r(!1)}else a.test(e)?(b({type:"previewPattern.update",pattern:e}),r(!1)):r(!0);""===e&&(b({type:"previewPattern.update",pattern:e}),r(!1)),C||b({type:"preview.visibility",visible:!0})}(e.target.value)},isInvalid:s})),i.a.createElement(Et.a,null,i.a.createElement(Et.a.Prepend,null,i.a.createElement(Et.a.Text,{id:"basic-addon3"},"Tempo")),i.a.createElement(yt.a,{placeholder:"tempo",value:f,onChange:function(e){return h(Number(e.target.value))}})),i.a.createElement(Et.a,null,i.a.createElement(Et.a.Prepend,null,i.a.createElement(j.a,{onClick:function(){new ft.c({url:S.get(m)}).toDestination().start(0)}},i.a.createElement(y.a,{icon:w.d}))),i.a.createElement(wt.a.Control,{as:"select",onChange:function(e){return p(e.target.value)}},Object.keys(mt).map((function(e,t){return i.a.createElement("option",{key:t,value:e},e)})))),i.a.createElement(wt.a.Check,{inline:!0,className:"ml-2 polymetric",type:"checkbox",label:"Polimetria",checked:P,onChange:function(){return b({type:"toggle.polymetric"})},disabled:!M}),i.a.createElement(j.a,{className:"ml-2",onClick:function(){return function(){var e=new ht(O,f,m,S.get(m),P,T);b({type:"claves.add",id:E.a.generate(),clave:e}),b({type:"previewPattern.update",pattern:O}),b({type:"preview.visibility",visible:!1}),b({type:"start.all"})}()},disabled:s||0===O.length},"Adicionar"),i.a.createElement(xt.a,{className:"ml-2"},i.a.createElement(xt.a.Toggle,{variant:"info",id:"dropdown-basic"},"presets"),i.a.createElement(xt.a.Menu,null,Object.keys(dt).map((function(e,t){return i.a.createElement(xt.a.Item,{key:t,onClick:function(){return dt[e].instruments.forEach((function(e){var t=e.sequence,a=e.tempo,n=e.sample,i=new ht(t,a,n,S.get(n));b({type:"claves.add",id:E.a.generate(),clave:i})})),void b({type:"start.all"})}},dt[e].name)})))),i.a.createElement(j.a,{onClick:function(){return function(){var t=k.map((function(e){return{sequence:e.pattern.sequence.join(""),tempo:e.bpm,sample:e.instrument}})),a=JSON.stringify(t);a!==N&&(D(),b({type:"claves.share",shareableLink:a}),b({type:"claves.removeAll"}),e.push("/guias?guias=".concat(a)))}()},disabled:!M},i.a.createElement(y.a,{icon:w.e}))))};var kt=function(){var e=Object(n.useContext)(q),t=e.state,a=e.dispatch,s=new URLSearchParams(Object(u.g)().search).get("guias"),r=JSON.parse(s);return Object(n.useEffect)((function(){function e(){return(e=Object(f.a)(v.a.mark((function e(n){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.forEach((function(e){var n=e.sequence,i=e.tempo,s=e.sample,r=new ht(n,i,s,t.samplers.get(s));return a({type:"claves.add",id:E.a.generate(),clave:r})}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}r&&function(t){e.apply(this,arguments)}(r)}),[s]),i.a.createElement("div",{className:"App"},i.a.createElement(jt,null),i.a.createElement("div",{className:"wrapper"},t.claves.map((function(e){return i.a.createElement(C,{key:e.id,clave:e})})),t.previewVisibility&&i.a.createElement(B,null)))},Ot=a(117),qt=a(169),Pt=a(168),Ct=a(118);var Nt=function(){return i.a.createElement(qt.a,{collapseOnSelect:!0,bg:"black",expand:"lg",variant:"black"},i.a.createElement(qt.a.Brand,null,i.a.createElement("h3",null,i.a.createElement(l.b,{to:"/"},"Polymatic ",i.a.createElement("small",null,Ot.version)))),i.a.createElement(Pt.a,{className:"mr-auto"},i.a.createElement(Pt.a,null,i.a.createElement(l.b,{to:"/sobre"},"sobre"))),i.a.createElement(Pt.a,{className:"justify-content-end"},i.a.createElement(Pt.a.Link,{href:"mailto:polymatic@ciberterreiro.org"},i.a.createElement(y.a,{icon:w.b,className:"github",size:"2x"})),i.a.createElement(Pt.a.Link,{href:"https://github.com/guilhermecomum/polymatic",target:"_blank",rel:"noopener noreferrer"},i.a.createElement(y.a,{icon:Ct.a,className:"github",size:"2x"}))))},St=(a(155),a(156),a(164));var At=function(){var e=Object(n.useState)(!0),t=Object(o.a)(e,2),a=t[0],s=t[1];m.a.initialize("UA-160360260-2"),m.a.pageview(window.location.pathname+window.location.search);var r=Object(n.useContext)(q).dispatch;return Object(n.useEffect)((function(){var e=new ft.e({urls:Object(c.a)({},mt),onload:function(){return s(!1)}});r({type:"load.app",samplers:e})}),[r]),a?i.a.createElement(St.a,{animation:"border",role:"status"},i.a.createElement("span",{className:"sr-only"},"Loading...")):i.a.createElement(l.a,{basename:"/"},i.a.createElement(Nt,null),i.a.createElement(u.c,null,i.a.createElement(u.a,{exact:!0,path:"/",component:kt}),i.a.createElement(u.a,{exact:!0,path:"/sobre",component:p}),i.a.createElement(u.a,{exact:!0,path:"/guias",component:kt})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(i.a.createElement(P,null,i.a.createElement(At,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}]),[[122,1,2]]]);
//# sourceMappingURL=main.2508423e.chunk.js.map