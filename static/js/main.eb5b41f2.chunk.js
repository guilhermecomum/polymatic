(this.webpackJsonpPolymatic=this.webpackJsonpPolymatic||[]).push([[0],Array(72).concat([function(e,t,a){e.exports=a.p+"static/media/agogo1.1065034e.wav"},function(e,t,a){e.exports=a.p+"static/media/agogo2.0e4e658f.wav"},function(e,t,a){e.exports=a.p+"static/media/caxixi.f6ddaabb.wav"},function(e,t,a){e.exports=a.p+"static/media/kick1.d96070b8.wav"},function(e,t,a){e.exports=a.p+"static/media/snare.ac6ee711.wav"},function(e,t,a){e.exports=a.p+"static/media/surdo1.4c11d5fa.wav"},function(e,t,a){e.exports=a.p+"static/media/surdo2.de3c5a5c.wav"},function(e,t,a){e.exports=a.p+"static/media/surdo3.d327f3d9.wav"},function(e,t,a){e.exports=a.p+"static/media/surdo4.5e1800e9.wav"},function(e,t,a){e.exports=a.p+"static/media/tamborim1.a6cbfb58.wav"},function(e,t,a){e.exports=a.p+"static/media/tamborim2.06bd97bb.wav"},function(e,t,a){e.exports=a.p+"static/media/block1.d9f8c3a9.wav"},function(e,t,a){e.exports=a.p+"static/media/block2.7e7a9a59.wav"},function(e,t,a){e.exports=a.p+"static/media/conga1.41b2f57f.wav"},function(e,t,a){e.exports=a.p+"static/media/conga2.5cc86b71.wav"},function(e,t,a){e.exports=a.p+"static/media/conga3.435be93f.wav"},function(e,t,a){e.exports=a.p+"static/media/conga4.a38157fd.wav"},function(e,t,a){e.exports=a.p+"static/media/cowbell.566cddac.wav"},function(e,t,a){e.exports=a.p+"static/media/egg1.cedb0f6a.wav"},function(e,t,a){e.exports=a.p+"static/media/egg2.714c0889.wav"},function(e,t,a){e.exports=a.p+"static/media/xequere1.c6ac1d9b.wav"},function(e,t,a){e.exports=a.p+"static/media/xequere2.0e563d7a.wav"},function(e,t,a){e.exports=a.p+"static/media/clap.7bdee98b.wav"},function(e,t,a){e.exports=a.p+"static/media/hat.f03a8f48.wav"},function(e,t,a){e.exports=a.p+"static/media/kick1.9621794a.wav"},function(e,t,a){e.exports=a.p+"static/media/kik2.c392cef6.wav"},function(e,t,a){e.exports=a.p+"static/media/kik3.557e0210.wav"},function(e,t,a){e.exports=a.p+"static/media/snare.4707aa1f.wav"},function(e,t,a){e.exports=a.p+"static/media/bass.b2419d4f.wav"},function(e,t,a){e.exports=a.p+"static/media/block.3753c44b.wav"},function(e,t,a){e.exports=a.p+"static/media/bum.4c11d5fa.wav"},function(e,t,a){e.exports=a.p+"static/media/claves.400c9ef3.wav"},function(e,t,a){e.exports=a.p+"static/media/cymbal.950d832b.wav"},function(e,t,a){e.exports=a.p+"static/media/djembe1.f3e648cb.wav"},function(e,t,a){e.exports=a.p+"static/media/djembe3.acef368f.wav"},function(e,t,a){e.exports=a.p+"static/media/djembe2.d38ab3d2.wav"},function(e,t,a){e.exports=a.p+"static/media/hit.a315148b.wav"},function(e,t,a){e.exports=a.p+"static/media/hithat.950d832b.wav"},function(e,t,a){e.exports=a.p+"static/media/kick2.18445a5e.wav"},function(e,t,a){e.exports=a.p+"static/media/kicklow.c09eab14.wav"},function(e,t,a){e.exports=a.p+"static/media/tamborim.a6cbfb58.wav"},,,,,function(e){e.exports=JSON.parse('{"name":"Polymatic","version":"5.1.0","private":true,"homepage":"https://polymatic.ciberterreiro.org","dependencies":{"@fortawesome/fontawesome-svg-core":"^1.2.27","@fortawesome/free-solid-svg-icons":"^5.12.1","@fortawesome/react-fontawesome":"^0.1.9","@testing-library/jest-dom":"^4.2.4","@testing-library/react":"^9.3.2","@testing-library/user-event":"^7.1.2","bootstrap":"^4.4.1","euclidean-rhythms":"^2.0.1","gh-pages":"^2.2.0","node-sass":"^4.13.1","react":"^16.13.0","react-bootstrap":"^1.0.0-beta.17","react-bootstrap-range-slider":"^0.3.1","react-dom":"^16.13.0","react-ga":"^2.7.0","react-router-dom":"^5.1.2","react-scripts":"3.4.0","shortid":"^2.2.15","tone":"^14.7.58"},"scripts":{"start":"react-scripts start","build":"react-scripts build","test":"react-scripts test","eject":"react-scripts eject","predeploy":"npm run build && cp CNAME build/CNAME","deploy":"gh-pages -b staging -d build"},"eslintConfig":{"extends":"react-app"},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]},"devDependencies":{"semantic-release":"^17.0.7"}}')},,,,function(e,t,a){e.exports=a(156)},,,,,function(e,t,a){},,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),s=a(29),r=a.n(s),c=(a(126),a(3)),o=a(11),l=a(40),u=a(15),m=a(68);var p=function(){return i.a.createElement("div",{className:"about"},i.a.createElement("div",{className:"col-8 offset-2"},i.a.createElement("h3",null,"Polymatic!"),i.a.createElement("p",null,"projeto idealizado por Gil Amancio e Guilherme Guerra"),i.a.createElement("p",null,"O Polymatic \xe9 um aplicativo para fazer m\xfasica ou dar aula de m\xfasica a partir de outros paradigmas que orientam a cria\xe7\xe3o musical. Ele \xe9 inspirado nos modos de produ\xe7\xe3o da m\xfasica africana e da di\xe1spora. N\xe3o \xe9 um software para fazer m\xfasica no computador, mas sim, um aplicativo para fazer m\xfasica assistida por computador, ou seja, o computador \xe9 uma ferramenta para instigar a cria\xe7\xe3o e a execu\xe7\xe3o musical coletiva que acontece junto com o computador."),i.a.createElement("p",null,"O Polymatic \xe9 um aplicativo que gera padr\xf5es r\xedtmicos m\xednimos. Esses padr\xf5es t\xeam v\xe1rios nomes em diferentes lugares, clave em Cuba, timeline nos Estados Unidos e Europa, e no Brasil resolvi cham\xe1-los de Guia."),i.a.createElement("p",null,"A escolha do nome Guia veio da associa\xe7\xe3o dos registros desses padr\xf5es r\xedtmicos de forma circular, feito pelo m\xfasico Safi-alDin em Bagd\xe1 no ano de 1280, com as Guias usadas pelo povo dos terreiros."),i.a.createElement("p",null,"Do ponto de vista musical a guia \xe9 um ostinato, que se repete sem varia\xe7\xe3o, ao longo de uma pe\xe7a musical. Ela atua como um dispositivo estruturador da cria\xe7\xe3o musical, d\xe1 o tempero da levada e atua tamb\xe9m como um cron\xf4metro."),i.a.createElement("p",null,"Nos terreiros, a palavra guia tamb\xe9m tem v\xe1rios significados, ela pode se referir tanto ao colar utilizado pelas pessoas que frequentam o terreiro, como tamb\xe9m as entidades que s\xe3o chamadas de guias."),i.a.createElement("p",null,"Acredito que chamar de guia os padr\xf5es r\xedtmicos gerados pelo Polymatic, vai nos aproximar do pensamento das culturas dos povos africanos e das di\xe1sporas e de suas experi\xeancias coletivas de fazer m\xfasica. Uma m\xfasica que n\xe3o se separa da dan\xe7a e da vida."),i.a.createElement("p",null,"Esperamos que o Polymatic possa possibilitar que voc\xea re\xfana a fam\xedlia, as/os amigos/as e se for professor as/os estudantes para juntos fazerem m\xfasica a partir do pensamento musical africano e da di\xe1spora."),i.a.createElement("p",null,"Mas como isso acontece? Leia o nosso manual."),i.a.createElement("p",null,i.a.createElement("a",{href:"".concat("","/manual.pdf"),target:"_blank",rel:"noopener noreferrer"},"Baixar manual"))))},d=a(4),f=a.n(d),v=a(10),h=a(64),b=a.n(h),g=(a(130),a(19)),w=a.n(g),E=a(31),y=a(32),x=a(161),j=a(71),k=a(12),O={previewPattern:"",previewVisibility:!1,samplers:{},polymetric:!1,claves:[],shareableLink:"",isPlaying:!1,instruments:null},q=Object(n.createContext)(O),P=function(e){var t=e.children,a=q.Provider,s=i.a.useCallback((function(e,t){switch(t.type){case"load.app":return Object(c.a)(Object(c.a)({},e),{},{samplers:t.samplers,instruments:t.instruments});case"previewPattern.update":return Object(c.a)(Object(c.a)({},e),{},{previewPattern:t.pattern});case"preview.visibility":return Object(c.a)(Object(c.a)({},e),{},{previewVisibility:t.visible});case"claves.add":return Object(c.a)(Object(c.a)({},e),{},{claves:[].concat(Object(k.a)(e.claves),[t.clave])});case"claves.remove":var a=e.claves.filter((function(e){return e.id!==t.id}));return Object(c.a)(Object(c.a)({},e),{},{claves:a,polymetric:a.length>0&&e.polymetric});case"claves.removeAll":return Object(c.a)(Object(c.a)({},e),{},{claves:[],polymetric:!1});case"claves.share":var n=e.claves.map((function(e){return{sequence:e.pattern.sequence.join(""),tempo:e.tempo,sample:e.instrument}}));return Object(c.a)(Object(c.a)({},e),{},{shareableLink:JSON.stringify(n)});case"toggle.polymetric":return Object(c.a)(Object(c.a)({},e),{},{polymetric:!e.polymetric});case"start.all":return Object(c.a)(Object(c.a)({},e),{},{isPlaying:!0});case"stop.all":return Object(c.a)(Object(c.a)({},e),{},{isPlaying:!1});default:throw new Error("C\xeas\xe1siessionibuspassnasavassi?")}}),[]),r=Object(n.useReducer)(s,O),l=Object(o.a)(r,2),u=l[0],m=l[1];return i.a.createElement(a,{value:{state:u,dispatch:m}},t)};q.Consumer;function C(e){var t=e.clave,a=Object(n.useRef)(),s=Object(n.useState)(100),r=Object(o.a)(s,2),c=r[0],l=r[1],u=t.pattern.sequence,m=t.tempo,p=t.clavis,d=t.instrument,f=Object(n.useState)(0),v=Object(o.a)(f,2),h=v[0],g=v[1],k=Object(n.useContext)(q).dispatch,O=Object(n.useContext)(q).state;Object(n.useEffect)((function(){p.configure(a.current,u,m),p.play(),O.isPlaying&&t.start()}),[O.isPlaying,t,p,u,m]);return i.a.createElement("div",{className:"layer"},i.a.createElement("canvas",{id:w.a.generate(),ref:a,width:640,height:425}),i.a.createElement("div",{className:"mt-2 volume"},i.a.createElement("span",{className:"mr-2"},"Rota\xe7\xe3o"),i.a.createElement(b.a,{value:h,min:1,max:u.join("").length,onChange:function(e){return a=Number(e.target.value),g(a),void t.shift(a);var a},tooltip:"off"})),i.a.createElement("ul",null,i.a.createElement("li",null,"padr\xe3o: ",u.join("")),i.a.createElement("li",null,"tempo: ",m),i.a.createElement("li",null,"instrumento: ",d)),i.a.createElement("div",{className:"controls"},i.a.createElement(x.a,{"aria-label":"Basic example"},i.a.createElement(j.a,{onClick:function(){t.start()}},i.a.createElement(E.a,{icon:y.a})),i.a.createElement(j.a,{onClick:function(){t.stop()}},i.a.createElement(E.a,{icon:y.c})),i.a.createElement(j.a,{onClick:function(){return t.remove(),void k({type:"claves.remove",id:t.id})}},i.a.createElement(E.a,{icon:y.e})))),i.a.createElement("div",{className:"mt-2 volume"},i.a.createElement("span",{className:"mr-2"},"Vol."),i.a.createElement(b.a,{value:c,min:0,max:100,tooltipLabel:function(e){return"".concat(e,"%")},onChange:function(e){return function(e){var a=function(e,t,a,n,i){return n+(i-n)*(e-t)/(a-t)}(e,0,100,-80,3);l(e),t.setVolume(a)}(Number(e.target.value))}})))}var S=a(1),N=a(2),A=function(){function e(){Object(S.a)(this,e),this.canvas=null,this.context=null,this.pattern=null,this.tempo=0,this.animate=!1,this.lastRender=Date.now(),this.draw=this.draw.bind(this),this.currentStep=0,this.patternPos={}}return Object(N.a)(e,[{key:"configure",value:function(e,t,a){this.canvas=e,this.context=e.getContext("2d"),this.pattern=t,this.tempo=a}},{key:"setCurrentStep",value:function(e){this.currentStep=e}},{key:"play",value:function(){this.animate=!0,window.requestAnimationFrame(this.draw)}},{key:"pause",value:function(){this.animate=!1}},{key:"draw",value:function(){var e=this.canvas,t=this.context,a=this.pattern,n="20px",i=2,s="#fff",r="#cc2c11",c=4,l="#cc2c11",u="#cc2c11",m=2,p="#fff",d="#fff",f=8,v="#cc2c11",h="#cc2c11",b=[200,200],g=b[0],w=b[1],E=80,y=2*Math.PI/a.length,x=-.5*Math.PI;function j(e,a,n){var i=n.radius,s=n.stroke,r=n.fill;t.strokeStyle=s,t.fillStyle=r,t.beginPath(),t.arc(e,a,i,0,2*Math.PI),t.fill(),t.stroke()}function k(e,t){j(e,t,{radius:c,stroke:l,fill:u})}function O(e,t){j(e,t,{radius:m,stroke:p,fill:d})}e.style.padding=n,e.width=g,e.height=w,t.clearRect(0,0,g,w),t.lineWidth=i,t.strokeStyle=s,t.beginPath(),t.arc(g/2,w/2,E,0,2*Math.PI),t.stroke();var q=[];function P(e,t){return[Math.cos(e)*t+g/2,Math.sin(e)*t+w/2]}for(var C=0;C<a.length;C++){var S=P(x+y*C,E),N=Object(o.a)(S,2),A=N[0],z=N[1];"1"===a[C]?(k(A,z),q.push([A,z])):O(A,z),this.patternPos[C]={x:A,y:z}}q.length>=1&&function(e){t.strokeStyle=r,t.beginPath(),t.moveTo(e[0][0],e[0][1]);for(var a=1;a<e.length;a++)t.lineTo(e[a][0],e[a][1]);t.closePath(),t.stroke()}(q),function(e,t){j(e,t,{radius:f,stroke:v,fill:h})}(this.patternPos[this.currentStep].x,this.patternPos[this.currentStep].y),this.animate&&window.requestAnimationFrame(this.draw)}}]),e}();function z(){var e=new A,t=Object(n.useRef)(),a=Object(n.useContext)(q).state;return Object(n.useEffect)((function(){t.current&&(e.configure(t.current,a.previewPattern,120),e.draw())}),[a.previewPattern,e]),a.previewPattern&&0!==a.previewPattern.length?i.a.createElement("div",{className:"layer"},i.a.createElement("canvas",{id:w.a.generate(),ref:t,width:640,height:425}),i.a.createElement("p",{className:"Preview"},"Pr\xe9-visualiza\xe7\xe3o")):null}var R,B=a(13),M=a(56),I=a.n(M),L=a(72),T=a.n(L),V=a(73),F=a.n(V),G=a(74),J=a.n(G),D=a(75),H=a.n(D),U=a(76),W=a.n(U),$=a(77),_=a.n($),K=a(78),Q=a.n(K),X=a(79),Y=a.n(X),Z=a(80),ee=a.n(Z),te=a(81),ae=a.n(te),ne=a(82),ie=a.n(ne),se=a(83),re=a.n(se),ce=a(84),oe=a.n(ce),le=a(85),ue=a.n(le),me=a(86),pe=a.n(me),de=a(87),fe=a.n(de),ve=a(88),he=a.n(ve),be=a(89),ge=a.n(be),we=a(90),Ee=a.n(we),ye=a(91),xe=a.n(ye),je=a(92),ke=a.n(je),Oe=a(93),qe=a.n(Oe),Pe=a(94),Ce=a.n(Pe),Se=a(95),Ne=a.n(Se),Ae=a(96),ze=a.n(Ae),Re=a(97),Be=a.n(Re),Me=a(98),Ie=a.n(Me),Le=a(99),Te=a.n(Le),Ve=a(100),Fe=a.n(Ve),Ge=a(101),Je=a.n(Ge),De=a(102),He=a.n(De),Ue=a(103),We=a.n(Ue),$e=a(104),_e=a.n($e),Ke=a(105),Qe=a.n(Ke),Xe=a(106),Ye=a.n(Xe),Ze=a(107),et=a.n(Ze),tt=a(108),at=a.n(tt),nt=a(109),it=a.n(nt),st=a(110),rt=a.n(st),ct=a(111),ot=a.n(ct),lt=a(112),ut=a.n(lt),mt={agogo1:T.a,agogo2:F.a,caxixi:J.a,kick1:H.a,snare:W.a,surdo1:_.a,surdo2:Q.a,surdo3:Y.a,surdo4:ee.a,tamborim1:ae.a,tamborim2:ie.a,block1:re.a,block2:oe.a,conga1:ue.a,conga2:pe.a,conga3:fe.a,conga4:he.a,cowbell:ge.a,egg1:Ee.a,egg2:xe.a,xequere1:ke.a,xequere2:qe.a,eclap:Ce.a,ehat:Ne.a,ekick1:ze.a,ekik2:Be.a,ekik3:Ie.a,esnare:Te.a,bass:Fe.a,block:Je.a,bumbo:He.a,claves:We.a,cymbal:_e.a,djembe1:Qe.a,djembe2:Ye.a,djembe3:et.a,hit:at.a,hithat:it.a,kick2:rt.a,kicklow:ot.a,tamborim:ut.a},pt=a(21),dt=(R={},Object(pt.a)(R,w.a.generate(),{name:"Toque Ignbin",instruments:[{sequence:"101101011010",tempo:120,sample:"conga1"}]}),Object(pt.a)(R,w.a.generate(),{name:"Son cubano",instruments:[{sequence:"1001001000101000",tempo:92,sample:"claves"}]}),Object(pt.a)(R,w.a.generate(),{name:"Rumba",instruments:[{sequence:"1001000100101000",tempo:110,sample:"claves"}]}),Object(pt.a)(R,w.a.generate(),{name:"Samba",instruments:[{sequence:"1011010101101010",tempo:60,sample:"tamborim"}]}),R),ft=function(){function e(t,a){Object(S.a)(this,e),this.pulses=t,this.steps=a,this.sequence="",this.createSequence(t,a),this.offset=0}return Object(N.a)(e,[{key:"update",value:function(e,t){this.createSequence(e,t)}},{key:"shift",value:function(e){if(this.offset<e){for(var t=this.sequence.splice(this.sequence.length-1,1),a=0;a<t.length;a++)this.sequence.unshift(t[a]);this.pulses=this.sequence.join(""),this.steps=this.sequence.length}else{for(var n=this.sequence.splice(0,1),i=0;i<n.length;i++)this.sequence.push(n[i]);this.pulses=this.sequence.join(""),this.steps=this.sequence.length}return this.offset=e,this}},{key:"createSequence",value:function(e,t){var a=typeof e;"number"===a?(this.steps=t,this.sequence=I.a.getPattern(e,t),this.pulses=this.sequence.join("")):"string"===a&&(this.steps=e.length,this.sequence=e.split(""))}}]),e}(),vt=a(30),ht=function(){function e(t,a,n,i){var s=this,r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],c=arguments.length>5?arguments[5]:void 0;if(Object(S.a)(this,e),this.id=w.a.generate(),this.prevSequence=c,this.pattern=new ft(t),this.tempo=a,this.volume=3,this.polymetric=r,this.clavis=new A,this.size=this.pattern.sequence.length,this.instrument=n,this.sample=i,this.context=new vt.b,this.channel=new vt.a({volume:this.volume,pan:0,context:this.context}),this.context.transport.bpm.value=this.tempo,this.player=new vt.c({url:this.sample,context:this.context}),this.polymetric){var o=this.prevSequence.length,l=this.size;if(l!==o)if(o>l){var u=o/l;this.tempo=(this.tempo*u).toFixed(2)}else{var m=l/o;this.tempo=(this.tempo/m).toFixed(2)}}this.indexArray=function(e){for(var t=[],a=0;a<e;a++)t.push(a);return t},this.tick=function(e,t){"1"===s.pattern.sequence[t]&&s.player.sync().start(e).chain(s.channel,s.context.destination),s.context.draw.schedule((function(){s.clavis.setCurrentStep(t)}),e)},this.seq=new vt.d({context:this.context,callback:this.tick,events:this.indexArray(this.size),subdivision:"".concat(this.size,"n")}).start(0),vt.f(),this.context.transport.start()}return Object(N.a)(e,[{key:"setVolume",value:function(e){this.volume=e,this.channel.set({volume:e})}},{key:"pattern",value:function(e,t){return new ft(e,t)}},{key:"shift",value:function(e){this.pattern=this.pattern.shift(e),this.clavis.draw()}},{key:"remove",value:function(){this.clavis.pause(),this.seq.dispose(),this.context.dispose(),this.channel.dispose()}},{key:"start",value:function(){this.seq.start(),this.clavis.play()}},{key:"pause",value:function(){this.clavis.pause()}},{key:"stop",value:function(){this.seq.stop(),this.clavis.pause()}}]),e}(),bt=a(164);function gt(e){var t=e.show,a=e.onHide,n=e.onConfirm;return i.a.createElement(bt.a,{show:t,onHide:a,size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0},i.a.createElement(bt.a.Header,{closeButton:!0},i.a.createElement(bt.a.Title,{id:"contained-modal-title-vcenter"},"Remover todas as guias?")),i.a.createElement(bt.a.Body,null,i.a.createElement("h4",null,"Aten\xe7\xe3o!"),i.a.createElement("p",null,"Voc\xea confirma que deseja apagar todas as guias?")),i.a.createElement(bt.a.Footer,null,i.a.createElement(j.a,{variant:"secondary",onClick:a},"Fechar"),i.a.createElement(j.a,{onClick:n},"Remover")))}var wt=a(162),Et=a(115),yt=a(165),xt=a(166);var jt=function(){var e=Object(u.f)(),t=Object(n.useState)(!1),a=Object(o.a)(t,2),s=a[0],r=a[1],c=Object(n.useState)("agogo1"),l=Object(o.a)(c,2),m=l[0],p=l[1],d=Object(n.useState)(120),f=Object(o.a)(d,2),v=f[0],h=f[1],b=Object(n.useContext)(q).dispatch,g=Object(n.useContext)(q).state,k=g.claves,O=g.previewPattern,P=g.polymetric,C=g.previewVisibility,S=g.shareableLink,N=g.samplers,A=Object(n.useState)(!1),z=Object(o.a)(A,2),R=z[0],M=z[1],L=k.length>0,T=Object(n.useRef)(null),V="";k.length>0&&(V=k[0].pattern.sequence.join(""));var F=function(){var e,t=Object(B.a)(k);try{for(t.s();!(e=t.n()).done;){e.value.stop()}}catch(a){t.e(a)}finally{t.f()}b({type:"stop.all",isPlaying:!0})},G=function(){!function(){var e,t=Object(B.a)(k);try{for(t.s();!(e=t.n()).done;){e.value.remove()}}catch(a){t.e(a)}finally{t.f()}b({type:"stop.all",isPlaying:!0})}(),b({type:"claves.removeAll"}),M(!1)};return i.a.createElement("div",{className:"toolbar"},i.a.createElement(gt,{show:R,onHide:function(){return M(!1)},onConfirm:function(){return G()}}),i.a.createElement("div",{className:"toolbar-controls"},i.a.createElement(x.a,{"aria-label":"Basic example"},i.a.createElement(j.a,{onClick:function(){return function(){var e,t=Object(B.a)(k);try{for(t.s();!(e=t.n()).done;){e.value.start()}}catch(a){t.e(a)}finally{t.f()}}()}},i.a.createElement(E.a,{icon:y.a})),i.a.createElement(j.a,{onClick:function(){return F()}},i.a.createElement(E.a,{icon:y.c})),i.a.createElement(j.a,{onClick:function(){return M(!0)},disabled:!L},i.a.createElement(E.a,{icon:y.d})))),i.a.createElement("div",{className:"toolbar-form"},i.a.createElement(wt.a,null,i.a.createElement(wt.a.Prepend,null,i.a.createElement(wt.a.Text,{id:"basic-addon3"},"Padr\xe3o")),i.a.createElement(Et.a,{placeholder:"1010101 ou 3,4",ref:T,onChange:function(e){return function(e){var t=new RegExp("^(\\d+),(\\d+)$"),a=new RegExp("^[0-1]{1,}$");if(t.test(e)){var n=e.split(",").map((function(e){return parseInt(e)})).sort((function(e,t){return e-t})),i=Object(o.a)(n,2),s=i[0],c=i[1],l=I.a.getPattern(s,c).join("");b({type:"previewPattern.update",pattern:l}),r(!1)}else a.test(e)?(b({type:"previewPattern.update",pattern:e}),r(!1)):r(!0);""===e&&(b({type:"previewPattern.update",pattern:e}),r(!1)),C||b({type:"preview.visibility",visible:!0})}(e.target.value)},isInvalid:s})),i.a.createElement(wt.a,null,i.a.createElement(wt.a.Prepend,null,i.a.createElement(wt.a.Text,{id:"basic-addon3"},"Tempo")),i.a.createElement(Et.a,{placeholder:"tempo",value:v,onChange:function(e){return h(e.target.value)}})),i.a.createElement(wt.a,null,i.a.createElement(wt.a.Prepend,null,i.a.createElement(j.a,{onClick:function(){new vt.c({url:N.get(m)}).toDestination().start(0)}},i.a.createElement(E.a,{icon:y.a}))),i.a.createElement(yt.a.Control,{as:"select",onChange:function(e){return p(e.target.value)}},Object.keys(mt).map((function(e,t){return i.a.createElement("option",{key:t,value:e},e)})))),i.a.createElement(yt.a.Check,{inline:!0,className:"ml-2 polymetric",type:"checkbox",label:"Polimetria",checked:P,onChange:function(){return b({type:"toggle.polymetric"})},disabled:!L}),i.a.createElement(j.a,{className:"ml-2",onClick:function(){return function(){var e=new ht(O,v,m,N.get(m),P,V);b({type:"claves.add",id:w.a.generate(),clave:e}),b({type:"previewPattern.update",pattern:O}),b({type:"preview.visibility",visible:!1}),b({type:"start.all"})}()},disabled:s||0===O.length},"Adicionar"),i.a.createElement(xt.a,{className:"ml-2"},i.a.createElement(xt.a.Toggle,{variant:"info",id:"dropdown-basic"},"presets"),i.a.createElement(xt.a.Menu,null,Object.keys(dt).map((function(e,t){return i.a.createElement(xt.a.Item,{key:t,onClick:function(){return dt[e].instruments.forEach((function(e){var t=e.sequence,a=e.tempo,n=e.instrument,i=new ht(t,a,N.get(n));b({type:"claves.add",id:w.a.generate(),clave:i})})),void b({type:"start.all"})}},dt[e].name)})))),i.a.createElement(j.a,{onClick:function(){return function(){var t=k.map((function(e){return{sequence:e.pattern.sequence.join(""),tempo:e.tempo,sample:e.instrument}})),a=JSON.stringify(t);a!==S&&(F(),b({type:"claves.share",shareableLink:a}),b({type:"claves.removeAll"}),e.push("/guias?guias=".concat(a)))}()},disabled:!L},i.a.createElement(E.a,{icon:y.b}))))};var kt=function(){var e=Object(n.useContext)(q),t=e.state,a=e.dispatch,s=new URLSearchParams(Object(u.g)().search).get("guias"),r=JSON.parse(s);return Object(n.useEffect)((function(){function e(){return(e=Object(v.a)(f.a.mark((function e(n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.forEach((function(e){var n=e.sequence,i=e.tempo,s=e.sample,r=new ht(n,i,s,t.samplers.get(s));return a({type:"claves.add",id:w.a.generate(),clave:r})}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}r&&function(t){e.apply(this,arguments)}(r)}),[s]),i.a.createElement("div",{className:"App"},i.a.createElement(jt,null),i.a.createElement("div",{className:"wrapper"},t.claves.map((function(e){return i.a.createElement(C,{key:e.id,clave:e})})),t.previewVisibility&&i.a.createElement(z,null)))},Ot=a(117),qt=a(168),Pt=a(167);var Ct=function(){return i.a.createElement(qt.a,{collapseOnSelect:!0,bg:"black",expand:"lg",variant:"black"},i.a.createElement(qt.a.Brand,null,i.a.createElement("h3",null,i.a.createElement(l.b,{to:"/"},"Polymatic ",i.a.createElement("small",null,Ot.version)))),i.a.createElement(Pt.a,{className:"mr-auto"},i.a.createElement(Pt.a,null,i.a.createElement(l.b,{to:"/sobre"},"sobre"))))},St=(a(154),a(155),a(163));var Nt=function(){var e=Object(n.useState)(!0),t=Object(o.a)(e,2),a=t[0],s=t[1];m.a.initialize("UA-160360260-2"),m.a.pageview(window.location.pathname+window.location.search);var r=Object(n.useContext)(q).dispatch;return Object(n.useEffect)((function(){var e=new vt.e({urls:Object(c.a)({},mt),onload:function(){return s(!1)}});r({type:"load.app",samplers:e})}),[r]),a?i.a.createElement(St.a,{animation:"border",role:"status"},i.a.createElement("span",{className:"sr-only"},"Loading...")):i.a.createElement(l.a,{basename:"/"},i.a.createElement(Ct,null),i.a.createElement(u.c,null,i.a.createElement(u.a,{exact:!0,path:"/",component:kt}),i.a.createElement(u.a,{exact:!0,path:"/sobre",component:p}),i.a.createElement(u.a,{exact:!0,path:"/guias",component:kt})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(i.a.createElement(P,null,i.a.createElement(Nt,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}]),[[121,1,2]]]);
//# sourceMappingURL=main.eb5b41f2.chunk.js.map